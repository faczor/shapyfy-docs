---
tags:
  - mobile
screen: Exercise Detail (Set Logger)
agent: "[[designer]]"
feature: "[[features/2-workout_process]]"
design_state: "[[Statuses/Finished]]"
---
# Exercise Detail (Set Logger) Screen

> **Parent Feature**: [2-workout_process.md](../features/2-workout_process.md)
> **Navigation**: See [00-app-overview.md](../features/00-app-overview.md) for complete flows

---

## Overview

### Purpose
The Exercise Detail screen is where users log sets for a specific exercise. Users see their historical performance, track today's progress with volume calculations, and can log, edit, or delete sets. The screen supports plan-based workouts with a visual **Set Progression Carousel** and provides options to skip or finish exercises.

### Context
**Entry Points:**
- From Active Workout: Tap any exercise card
- From Onboarding: Demo exercise with pre-filled sets

**Exit Points:**
- Back arrow: Returns to Active Workout (saves all logged sets)
- Skip Exercise: Marks as Skipped, returns to Active Workout
- Finish Exercise: Marks as Completed, returns to Active Workout

### Key Features (2025-12-02 Update - Simplified)
- **ğŸ†• Horizontal Set Carousel** - Contextual roadmap (Plan OR History based on context)
- **Volume tracking** with simple count-up animation
- **Skip Exercise** functionality when 0 sets logged
- **Plan deviation dialog** when logged < planned sets
- **Pre-fill from history** (plan as fallback)
- **Edit/delete sets** inline
- **Minimal animations** - Essential feedback only, no celebration fatigue

---

## Screen States

1. **From Plan (With Carousel)** - Set Progression Carousel visible, guided experience
2. **Custom Workout (No Plan)** - History carousel visible, freestyle experience
3. **First Set (Has History)** - Historical data visible, 0 sets logged today
4. **Multiple Sets** - Today's sets list visible, "Finish Exercise" button
5. **Edit Mode** - Editing specific set, "Update Set" button
6. **First Time Exercise** - No history, motivational message
7. **All Sets Complete** - Celebration state with finish options

---

## Top Bar

**Configuration**: Back + Logo (standard Exercise Detail top bar)

```
[â†]              Shapyfy!
```

### Specifications:
- **Height:** 56dp
- **Background:** #FFFFFF (from LightSurface)
- **Shadow:** Elevation 2dp

### Back Arrow (Left):
- Icon: Left arrow â†
- Color: #000000 (from TextOnLight)
- Size: 24dp
- Padding left: 16dp
- Tap area: 48dp Ã— 48dp
- **Behavior:** Returns to Active Workout screen (non-destructive, saves all logged sets)

### Logo (Center):
- Shapyfy logo
- Height: 32dp
- Centered horizontally

---

## Content Area

- **Background:** #F3F3F8 (from LightBackground)
- **Padding:** Horizontal 16dp, Top 16dp, Bottom 24dp
- **Scrollable:** Vertical

---

## Exercise Info Card

- **Background:** #FFFFFF (from LightSurface)
- **Border radius:** 12dp
- **Padding:** 16dp
- **Margin bottom:** 16dp
- **Shadow:** Elevation 2dp

### Exercise Name:
- Text: Exercise name (e.g., "Bench Press")
- Font: 20sp / Bold
- Color: #000000 (from TextOnLight)
- Margin bottom: 12dp

---

### Plan Progress Indicator (When from Workout Plan - Redesigned)

**Shown above historical data when `exercise.isFromPlan = true`:**

**Purpose:** Simple progress indicator showing planned set count and completion status. Values shown contextually per-set in the input card (see "Per-Set Plan Suggestion" below).

**Container:**
- Background: Transparent (minimal, inline with exercise name)
- Margin bottom: 8dp

**Layout (Horizontal):**

```
ğŸ“‹ 3 sets planned                         (0/3)
```

**Icon:**
- Icon: ğŸ“‹ (clipboard emoji) OR Material Symbol `assignment`
- Size: 16dp
- Color: #A8E6CF (LimeGreenDark - plan accent)
- Margin right: 6dp

**Text (Left):**
- Text format: "[X] sets planned"
- Example: "3 sets planned"
- Font: 14sp / Medium
- Color: #666666 (TextOnLightTertiary)

**Progress Badge (Right):**
- Text format: "([logged]/[planned])"
- Example: "(0/3)" â†’ "(1/3)" â†’ "(2/3)" â†’ "(3/3)"
- Font: 14sp / Medium
- Color: #666666 (default) â†’ #A8E6CF (when complete: logged >= planned)
- Alignment: Right

**Progress States:**

| State | Display | Color |
|-------|---------|-------|
| 0 logged | "(0/3)" | #666666 (gray) |
| Partial | "(2/3)" | #666666 (gray) |
| Complete | "(3/3) âœ“" | #A8E6CF (green) |
| Exceeded | "(4/3) âœ“" | #A8E6CF (green) |

**Animation:**
- Progress badge pulses briefly (scale 1.0 â†’ 1.1 â†’ 1.0, 200ms) when set logged
- Checkmark fades in when complete (opacity 0 â†’ 1, 200ms)

**Why Simplified:**
- Less cognitive load (just count, not values)
- Values shown contextually per-set in input card
- User sees "big picture" at a glance without clutter

---

### Historical Data (When Available)

**Last Workout Header:**
- Text format: "Last trained: [X] days ago"
- Example: "Last trained: 3 days ago"
- Font: 14sp / Medium
- Color: #2D2D2D (from TextOnLightSecondary)
- Margin bottom: 8dp

**Set List from Last Workout (Read-only):**
Each set displays on new line:
- Text format: "Set [X]: [weight]kg Ã— [reps] reps"
- Example: "Set 1: 80kg Ã— 10 reps"
- Font: 14sp / Regular
- Color: #666666 (from TextOnLightTertiary)
- Line spacing: 6dp between sets

---

### First Time Exercise (No History)

**Instead of "Last trained" header:**
- Text: "ğŸ‰ First time doing this exercise!"
- Font: 14sp / Regular
- Color: #A8E6CF (from LimeGreenDark)
- Padding: Vertical 12dp
- Text alignment: Left

**No set list** - historical section completely hidden

---

## ğŸ†• Horizontal Set Carousel

**Purpose:** Visual roadmap showing the user's set progression. Shows EITHER planned sets (from workout plan) OR historical sets (for reference) - never both.

### Display Logic (Contextual)

```kotlin
enum class CarouselMode { PLAN_PROGRESSION, HISTORY_REFERENCE, HIDDEN }

val carouselMode = when {
    exercise.isFromPlan -> CarouselMode.PLAN_PROGRESSION
    historicalSets.isNotEmpty() -> CarouselMode.HISTORY_REFERENCE
    else -> CarouselMode.HIDDEN
}
```

| Context | Mode | What User Sees |
|---------|------|----------------|
| **From Workout Plan** | `PLAN_PROGRESSION` | Planned sets as roadmap (done â†’ current â†’ next) |
| **Custom + Has History** | `HISTORY_REFERENCE` | Last workout's sets as reference |
| **Custom + No History** | `HIDDEN` | No carousel (nothing useful to show) |

**Key Principle:** ONE carousel, ONE purpose based on context. No redundancy.

---

### Screen Layout with Carousel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†                     Shapyfy!                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  BENCH PRESS                          ğŸ† PR: 100kg      â”‚  â† Exercise Info Card
â”‚  â”‚  Last trained: 3 days ago                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  ğŸ“‹ SET PROGRESSION                              3/6    â”‚  â† CAROUSEL
â”‚  â”‚                                                         â”‚
â”‚  â”‚  â—„  [S2 âœ“]  [S3 â†’]  [S4 â—‹]  â–º                          â”‚
â”‚  â”‚       60Ã—10    80Ã—6    80Ã—6                             â”‚
â”‚  â”‚                                                         â”‚
â”‚  â”‚      â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•                            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚  ğŸ“Š Today: 2 sets Â· 1,020kg                             â”‚  â† Merged Footer
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  TODAY'S SETS                                     2     â”‚
â”‚  â”‚  âœ“ Set 1: 40kg Ã— 12     âœ“ Set 2: 60kg Ã— 10             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  RECORD SET 3                                           â”‚  â† Input Card
â”‚  â”‚  ğŸ“‹ Plan: 80kg Ã— 6 reps                    [Use Plan]   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  â”‚    [80]      â”‚  â”‚    [6]       â”‚                     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚  â”‚  [            Log Set             ]                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                             â”‚
â”‚  [  Skip  ]                           [ Finish Exercise ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Carousel Container

- **Background:** #FFFFFF (LightSurface)
- **Border radius:** 12dp
- **Padding:** 16dp
- **Margin:** 16dp top, 16dp bottom
- **Shadow:** Elevation 1dp

### Carousel Header

**Layout (Horizontal, space-between):**

```
ğŸ“‹ SET PROGRESSION                                        3/6
```

**Left Side:**
- Icon: ğŸ“‹ (clipboard emoji) OR Material Symbol `assignment`
- Icon size: 18dp
- Icon color: #A8E6CF (LimeGreenDark)
- Margin right: 8dp
- Text: "SET PROGRESSION"
- Font: 16sp / Medium
- Color: #000000 (TextOnLight)

**Right Side (Progress Counter):**
- Text format: "[logged]/[total]"
- Example: "3/6"
- Font: 14sp / Medium
- Color: #666666 (TextOnLightTertiary)
- When complete: Color changes to #A8E6CF

---

### Set Cards Row (Scrollable)

**Container:**
- Horizontal scroll (LazyRow)
- Padding horizontal: 4dp
- Margin top: 16dp
- Snap-to-item behavior enabled
- Show 3 cards at a time (done, current, next)

**Card Dimensions:**
- **Done cards:** 100dp width Ã— 100dp height, scale 95%
- **Current card:** 120dp width Ã— 120dp height (20% larger)
- **Upcoming cards:** 100dp width Ã— 100dp height
- **Gap between cards:** 12dp
- **Border radius:** 12dp (all cards)

---

### Card States (Visual Specifications)

#### Done Card (âœ“)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      âœ“        â”‚
â”‚    SET 2      â”‚
â”‚    60kg       â”‚
â”‚    Ã— 10       â”‚
â”‚              â”‚
â”‚    done       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Scale:** 95% of base size
- **Opacity:** 90%
- **Background:** #F9F9F9 (neutral gray)
- **Border:** 1dp solid `#A8E6CF` at 40% opacity
- **Shadow:** Elevation 1dp

**Checkmark Icon:**
- Icon: âœ“
- Size: 20dp
- Color: #A8E6CF (LimeGreenDark)
- Position: Top center, margin top 12dp

**Text Hierarchy:**
- Set number: "SET 2" - 12sp / Bold, #2D2D2D
- Weight: "60kg" - 16sp / Medium, #000000
- Reps: "Ã— 10" - 14sp / Regular, #666666
- Status: "done" - 10sp / Medium, #666666, uppercase

---

#### Current Card (â†’) - THE HERO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â†’            â”‚
â”‚      SET 3          â”‚
â”‚      80kg           â”‚
â”‚      Ã— 6            â”‚
â”‚                     â”‚
â”‚    current          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Scale:** 110% of base size (slightly larger, not dramatic)
- **Opacity:** 100%
- **Background:** #FFFFFF
- **Border:** 2dp solid #A8E6CF (solid, NO animation)
- **Shadow:** Elevation 4dp (creates depth, no glow needed)

**Arrow Icon:**
- Icon: â†’ (right arrow)
- Size: 20dp
- Color: #A8E6CF
- Position: Top center, margin top 12dp
- **Static** (no animation)

**Text Hierarchy:**
- Set number: "SET 3" - 14sp / Bold, #000000
- Weight: "80kg" - 18sp / Bold, #000000
- Reps: "Ã— 6" - 16sp / Medium, #2D2D2D
- Status: "current" - 11sp / Medium, #A8E6CF

**Design Note:** Current card stands out through size, border color, and elevation - NOT through animations. Clean and focused.

---

#### Upcoming Card (â—‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â—‹        â”‚
â”‚    SET 4      â”‚
â”‚    80kg       â”‚
â”‚    Ã— 6        â”‚
â”‚              â”‚
â”‚    next       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Scale:** 100% of base size
- **Opacity:** 75%
- **Background:** #F9F9F9 (neutral gray)
- **Border:** 1dp solid #E5E5E5 (LightGray)
- **Shadow:** Elevation 1dp with inner shadow (recessed feel)

**Circle Icon:**
- Icon: â—‹ (empty circle)
- Size: 20dp
- Color: #CCCCCC
- Position: Top center, margin top 12dp

**Text Hierarchy:**
- Set number: "SET 4" - 12sp / Bold, #666666
- Weight: "80kg" - 16sp / Medium, #666666
- Reps: "Ã— 6" - 14sp / Regular, #999999
- Status: "next" - 10sp / Medium, #999999 â†’ Use #666666 for accessibility

---

#### Finish Card (ğŸ) - Shows after last set

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ       â”‚
â”‚              â”‚
â”‚   FINISH      â”‚
â”‚              â”‚
â”‚   last        â”‚
â”‚   set!        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Background:** #F0FFF4 (light green tint)
- **Border:** 1dp dashed #A8E6CF
- **Opacity:** 100%

**Flag Icon:**
- Icon: ğŸ (checkered flag) OR Material Symbol `flag`
- Size: 32dp
- Color: #A8E6CF

**Text:**
- "FINISH" - 14sp / Bold, #A8E6CF
- "last set!" - 12sp / Regular, #666666

---

### Progress Bar (Under Cards)

**Position:** Below card row
**Margin top:** 12dp

**Track (Inactive):**
- Height: 4dp
- Background: #E5E5E5 (LightGray)
- Border radius: 2dp (rounded ends)
- Width: 80% of carousel width, centered

**Progress (Active):**
- Height: 4dp
- Background: #A8E6CF (LimeGreenDark)
- Border radius: 2dp
- Width: Proportional to (logged sets / total sets)

**Indicator Dot:**
- Diameter: 12dp
- Background: #A8E6CF
- Border: 2dp solid #FFFFFF
- Shadow: Elevation 2dp
- Position: At current progress point (floats above track)

**Animation (On Set Complete):**
- Dot slides smoothly to new position (300ms, ease-out)
- Dot scale pulse: 1.0 â†’ 1.4 â†’ 1.0 (spring, 200ms)

---

### Carousel Animations (Simplified)

#### On Set Logged - Auto-Scroll

**Total Duration:** ~300ms

**Animation Sequence:**
1. Cards slide left smoothly (300ms, ease-out)
2. New current card appears from right
3. Progress bar updates position

**That's it.** No glow effects, no pulsing, no complex sequences.

**Haptic:** Light impact when carousel snaps to new position

---

#### Manual Swipe Gesture

**User can manually swipe to preview other sets:**
- Snap-to-card behavior on release
- Rubber-band effect at boundaries
- Haptic: Light impact on snap

---

### All Sets Complete State

**When user logs the final planned set:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ALL DONE!                                         6/6  â”‚
â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚    âœ“      â”‚  â”‚    âœ“      â”‚  â”‚        ğŸ‰           â”‚  â”‚
â”‚     â”‚  SET 5    â”‚  â”‚  SET 6    â”‚  â”‚     ALL DONE!       â”‚  â”‚
â”‚     â”‚  80kg     â”‚  â”‚  80kg     â”‚  â”‚                     â”‚  â”‚
â”‚     â”‚  Ã— 6      â”‚  â”‚  Ã— 6      â”‚  â”‚  [ Finish ]         â”‚  â”‚
â”‚     â”‚   done    â”‚  â”‚   done    â”‚  â”‚  [ +1 Bonus ]       â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**"All Done" Card:**
- **Width:** ~150dp (fits in carousel)
- **Background:** #F0FFF4 (light green tint)
- **Border:** 2dp solid #A8E6CF

**Content:**
- Party emoji: ğŸ‰ (24dp)
- "ALL DONE!" - 14sp / Bold, #A8E6CF

**Buttons (Stacked within card):**
- **[Finish]:** Primary button, #A8E6CF bg
- **[+1 Bonus]:** Text link style, #666666

**Celebration (Simple):**
- Header changes: "SET PROGRESSION" â†’ "ALL DONE! ğŸ‰"
- Progress bar fills completely
- Haptic: Medium impact (this is the ONE moment worth celebrating)

---

### For Custom Workout (No Plan) - History Carousel

**When `exercise.isFromPlan == false` but history exists:**

Show last workout's sets as READ-ONLY reference:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“œ LAST WORKOUT                                     3d ago â”‚
â”‚                                                             â”‚
â”‚  â—„  [S1]  [S2]  [S3]  â–º                                    â”‚
â”‚     75Ã—10  75Ã—9  75Ã—8                                       â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Today: 2 sets Â· 1,500kg                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Differences from Plan Carousel:**
- Header: "ğŸ“œ LAST WORKOUT" instead of "ğŸ“‹ SET PROGRESSION"
- Icon: ğŸ“œ scroll emoji
- No "current" highlight (all cards same style)
- No progress bar
- Cards are reference only (gray style)
- Footer shows today's progress: "ğŸ“Š Today: X sets Â· Ykg" (merged with volume)

**Card Style (History - all same):**
- Background: #F9F9F9
- Border: 1dp solid #E5E5E5
- Opacity: 80%
- No icons (just text)

---

## Carousel Footer (Today's Progress)

**Purpose:** Unified display of today's session progress â€” set count + volume â€” integrated into the carousel card footer.

### Layout

```
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Today: 2 sets Â· 1,500kg                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Text Format

| Sets Logged | Volume | Display |
|-------------|--------|---------|
| 0 | 0kg | `ğŸ“Š Today: 0 sets Â· 0kg` |
| 1 | 400kg | `ğŸ“Š Today: 1 set Â· 400kg` |
| 2 | 1,500kg | `ğŸ“Š Today: 2 sets Â· 1,500kg` |
| 5 | 3,200kg | `ğŸ“Š Today: 5 sets Â· 3,200kg` |

**Grammar:** "1 set" (singular) vs "2 sets" (plural)

### Specifications

**Container:**
- Background: #F9F9F9 (slightly darker than card body)
- Border top: 1dp solid #E5E5E5 (divider)
- Padding: 12dp horizontal, 10dp vertical
- Border radius: 0dp top, 12dp bottom (follows card shape)

**Icon:**
- Icon: ğŸ“Š chart bars emoji or Material Icon `bar_chart`
- Size: 16dp
- Margin right: 6dp
- Color: #666666 (TextOnLightTertiary)

**Text:**
- Text format: `Today: [X] set(s) Â· [Y]kg`
- Font: 14sp / Medium
- Color: #2D2D2D (TextOnLightSecondary)
- Dot separator: Â· (middle dot, not period)

**Zero State:**
- Text: `ğŸ“Š Today: 0 sets Â· 0kg`
- Color: #666666 (dimmer when nothing logged)

### Volume Calculation

```kotlin
val totalVolume = todaysSets.sumOf { it.weight * it.reps }.toInt()
val setsCount = todaysSets.size
val setsLabel = if (setsCount == 1) "set" else "sets"

// Format: "Today: X set(s) Â· Y,YYYkg"
val footerText = "Today: $setsCount $setsLabel Â· ${formatVolume(totalVolume)}kg"
```

**Display Rules:**
- Rounds to whole number (no decimals)
- Thousands separator: 1,500kg (not 1500kg)
- Always shows "kg" unit

### Animation

**When Set Logged:**
- Volume number animates from old value to new value (count-up)
- Set count updates instantly
- Duration: 300ms
- Easing: Linear

---

### Fallback: When Carousel is Hidden

**Condition:** `CarouselMode.HIDDEN` (no plan AND no history â€” first-time custom exercise)

**Solution:** Show standalone progress indicator above Today's Sets section:

```
ğŸ“Š Today: 1 set Â· 400kg
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Today's Sets
â”” Set 1: 50kg Ã— 8 reps  [âœï¸] [ğŸ—‘ï¸]
```

**Specifications (Standalone):**
- Position: Above "Today's Sets" header
- Margin bottom: 12dp
- No card/container (inline text)
- Same text styling as carousel footer

---

## Today's Sets Section (Simplified)

### Empty State (0 Sets Logged)

- **Background:** None
- **Margin bottom:** 16dp

**Header:**
- Text: "Today's Sets"
- Font: 16sp / Medium
- Color: #000000
- Margin bottom: 12dp

**Empty State Message:**
- Text: "No sets logged yet"
- Font: 14sp / Regular
- Color: #666666
- Style: Centered, italic
- Padding: Vertical 16dp

---

### With Logged Sets (1+ Sets)

**Container:**
- Background: #FFFFFF (from LightSurface)
- Border radius: 12dp
- Padding: 16dp
- Margin bottom: 16dp
- Shadow: Elevation 1dp

**Header:**
- Text: "Today's Sets"
- Font: 16sp / Medium
- Color: #000000
- Margin bottom: 12dp

### Set Item Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Set 1: 80kg Ã— 12 reps                        [âœï¸] [ğŸ—‘ï¸]    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Set 2: 80kg Ã— 10 reps                        [âœï¸] [ğŸ—‘ï¸]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Set Text:**
- Text format: "Set [X]: [weight]kg Ã— [reps] reps"
- Example: "Set 1: 80kg Ã— 12 reps"
- Font: 14sp / Regular
- Color: #000000
- Padding: Vertical 8dp

**Edit Icon:**
- Icon: Pencil symbol (Material `edit`)
- Color: #A8E6CF (from LimeGreenDark)
- Size: 20dp
- Tap target: 44dp Ã— 44dp (accessibility)
- **Behavior:** Populates input fields with this set's data

**Delete Icon:**
- Icon: Ã— or trash symbol (Material `delete`)
- Color: #FF9999 (from ErrorRed)
- Size: 20dp
- Tap target: 44dp Ã— 44dp (accessibility)
- Margin left: 8dp
- **Behavior:** Shows delete confirmation dialog

**Divider:**
- Border bottom: 1dp solid #E5E5E5 (LightGray)
- Not shown after last item

---

### Set Appearance Animation (Simple)

**When new set logged:**
- New set fades in (opacity 0 â†’ 1, 200ms)
- Optional: Slight slide (TranslateY -10dp â†’ 0dp)

**No highlight pulse, no complex phasing.**

---

## Set Input Card (Enhanced)

**Container:**
- Background: #FFFFFF (from LightSurface)
- Border radius: 12dp
- Padding: 20dp (increased from 16dp for premium feel)
- Margin top: 16dp
- Shadow: Elevation 2dp

### Header Row

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RECORD SET 3                                       ğŸ¯ Next â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Left Side:**
- Text: "RECORD SET [X]" (changed from "Log Set" for clarity)
- Font: 16sp / Medium
- Color: #000000
- Margin bottom: 12dp

**Right Side (NEW - Motivational Indicator):**
- Text: "ğŸ¯ Next"
- Font: 12sp / Medium
- Color: #A8E6CF
- Shows when plan exists and this is next planned set

**In Edit Mode:**
- Text: "EDIT SET [X]"
- Example: "EDIT SET 2"

---

### Per-Set Plan Suggestion (NEW - Contextual)

**Condition:** Show when `exercise.isFromPlan == true` AND suggestion is meaningful (see rules below).

**Position:** Below header, above input fields.

**Layout:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Log Set 2                                      â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ’¡ Plan: 8 reps @ 70kg            [Use]   â”‚  â”‚  â† Per-set suggestion
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Weight (kg) â”‚  â”‚ Reps        â”‚              â”‚
â”‚  â”‚     60      â”‚  â”‚     10      â”‚              â”‚  â† Pre-filled from history
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Container:**
- Background: #F0FFF4 (very light green tint - plan accent)
- Border: 1dp solid #C8E6C9 (light green border)
- Border radius: 8dp
- Padding: 10dp 12dp
- Margin bottom: 12dp

**Icon:**
- Icon: ğŸ’¡ (lightbulb emoji) OR Material Symbol `tips_and_updates`
- Size: 16dp
- Color: #2D7A5F (Functional Primary)
- Margin right: 6dp

**Text:**
- Text format: "Plan: [reps] reps @ [weight]kg"
- Example: "Plan: 8 reps @ 70kg"
- Font: 14sp / Regular
- Color: #2D7A5F (Functional Primary)

**[Use] Button (Right):**
- Background: #A8E6CF (LimeGreenDark)
- Text: "Use"
- Text color: #1A1A1A
- Font: 13sp / Bold
- Padding: 6dp 12dp
- Border radius: 6dp
- Position: Right side, vertically centered

**[Use] Button Tap Behavior:**
1. Fill Weight field with `exercise.plannedSets[currentSetIndex].weight`
2. Fill Reps field with `exercise.plannedSets[currentSetIndex].reps`
3. Suggestion banner fades out (opacity 1 â†’ 0, 150ms)
4. Quick haptic feedback (light impact)
5. Banner stays hidden for this set (user chose to use plan values)

---

### When to Show Per-Set Suggestion

**Show suggestion when:**

| Scenario | Show? | Reason |
|----------|-------|--------|
| No history, plan has values | âœ… Yes | Helpful starting point |
| History exists, plan differs significantly (>20% weight or >3 reps) | âœ… Yes | Plan differs from habit |
| History exists, plan matches (~same values) | âŒ No | Redundant, adds clutter |
| Custom exercise (not from plan) | âŒ No | No plan to suggest |
| User already tapped [Use] for this set | âŒ No | Already applied |

**"Significantly differs" threshold:**
```kotlin
fun shouldShowSuggestion(
    historyWeight: Double?,
    historyReps: Int?,
    plannedWeight: Double,
    plannedReps: Int
): Boolean {
    // No history = always show suggestion
    if (historyWeight == null || historyReps == null) return true

    // Check if plan differs significantly
    val weightDiff = abs(plannedWeight - historyWeight) / historyWeight
    val repsDiff = abs(plannedReps - historyReps)

    return weightDiff > 0.20 || repsDiff > 3  // >20% weight change OR >3 reps difference
}
```

**Rationale:**
- If plan matches history â†’ user will naturally do similar values, no need to clutter
- If plan differs â†’ user should know their plan changed (maybe progressive overload)

---

### Input Fields (Side by Side)

**Layout:** Horizontal, equal width with gap

> **Component Reference:** Both input fields use the **[[components/gym-numpad|GymNumpad]]** component.
> See `designer/components/gym-numpad.md` for full specifications (closed state, bottom sheet numpad, animations, haptics).

**Weight Field (Left, 48% width):**

```typescript
<GymNumpad
  value={weight}
  unit="kg"
  min={0}
  max={500}
  allowDecimals={true}
  label="Weight (kg)"
  onConfirm={(value) => setWeight(value)}
/>
```

**Reps Field (Right, 48% width, 4% margin left):**

```typescript
<GymNumpad
  value={reps}
  unit="reps"
  min={1}
  max={100}
  allowDecimals={false}
  label="Reps"
  onConfirm={(value) => setReps(value)}
/>
```

**Pre-fill Logic:** See "Pre-fill Priority" section below for value initialization.

---

### Pre-fill Priority (Updated - History First, Plan Fallback):

```kotlin
1. If current workout has logged sets: Use last logged set
2. Else if history exists for this exercise: Use history Set N
3. Else if plan has values for this set: Use plan values (helpful starting point)
4. Else: Empty (0)
```

**Logic:**
- **History first** = respects user autonomy (what they actually did)
- **Plan as fallback** = helpful for first-time exercises (not 0)
- User can always override with the values they want

**Why this changed from original:**
Original design had "Plan values are NOT used for pre-fill" â€” but this caused poor UX when user had NO history. Starting from 0kg Ã— 0 reps for a first-time exercise with planned values was frustrating. Plan values provide a sensible starting point.

**Implementation:**
```kotlin
fun getPreFillValues(
    setNumber: Int,
    todaysSets: List<ExerciseSet>,
    historicalSets: List<ExerciseSet>,
    plannedSets: List<PlannedSet>?  // nullable for custom exercises
): Pair<Double, Int> {
    // 1. Current workout sets (most recent)
    if (todaysSets.isNotEmpty()) {
        return todaysSets.last().let { it.weight to it.reps }
    }

    // 2. History (what user actually did before)
    if (historicalSets.size >= setNumber) {
        return historicalSets[setNumber - 1].let { it.weight to it.reps }
    }

    // 3. Plan values (fallback for first-time exercises)
    if (plannedSets != null && plannedSets.size >= setNumber) {
        return plannedSets[setNumber - 1].let { it.weight to it.reps }
    }

    // 4. Default empty
    return 0.0 to 0
}
```

---

## Action Buttons

### Primary Button - "Log Set"

**Enabled State (Default):**
- Position: Below input card
- Margin top: 16dp
- Background: #A8E6CF (from LimeGreenDark)
- Text: "Log Set"
- Text color: #1A1A1A (from TextOnLightCard)
- Font: 16sp / Bold
- Padding: Vertical 14dp
- Border radius: 12dp
- **Width: Full width** â† CRITICAL: Must span entire content width
- Shadow: Elevation 2dp

**Behavior:**
- Tap â†’ Saves set to local database
- Quick haptic feedback (light impact)
- Celebration animation (see below)
- New set appears in "Today's Sets" section
- Input fields update for next set
- Header updates to "Log Set [N+1]"
- Screen scrolls to show newly logged set
- Volume display animates to new total

**Disabled State (During Celebration Animation Only):**
- Background: #C1DFD1 (from LimeGreenDisabled)
- Text: "âœ“ Set Logged"
- Text color: #1A1A1A (same as enabled)
- Font: 16sp / Bold (same as enabled)
- All other properties: Same as enabled state
- Duration: 800ms
- Purpose: Prevents double-logging

**Important:** Button should ONLY be disabled during the 800ms celebration animation. Do NOT disable for empty fields or other validation - button should always be enabled for tapping otherwise.

---

**In Edit Mode:**
- Text: "Update Set"
- Same styling
- **Behavior:** Saves changes to selected set, returns to log mode

---

### Secondary Button - Conditional (Issue #6)

**Button changes based on logged sets:**

---

#### When 0 Sets Logged â†’ "Skip Exercise" Button

- Position: Below Log Set button
- Margin top: 12dp
- Background: #E5E5E5 (from LightGray - SOLID, not transparent)
- Border: None (NOT outline style)
- Text: "Skip Exercise"
- Text color: #666666 (from TextOnLightTertiary)
- Font: 16sp / Medium
- Padding: Vertical 14dp
- Border radius: 12dp
- **Width: Full width** â† CRITICAL: Must span entire content width
- Shadow: None

**Visual Note:** This button should have a solid gray background. It should NOT use outline/border styling (that's for "Finish Exercise"). Gray = neutral, less desirable action.

**Behavior:**
- Tap â†’ Opens skip confirmation dialog (see below)
- After confirmation â†’ Marks exercise as "Skipped"
- **Smart Navigation** (see below for logic)
- Exercise shows with "Skipped" state (grayed, 60% opacity)

---

#### When 1+ Sets Logged â†’ "Finish Exercise" Button

- Position: Below Log Set button
- Margin top: 12dp
- Background: Transparent
- Border: 2dp solid #E5E5E5 (from LightGray)
- Text: "Finish Exercise"
- Text color: #666666 (from TextOnLightTertiary)
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp
- **Width: Full width** â† CRITICAL: Must span entire content width

**Behavior:**
- If exercise from workout plan AND `logged_sets < planned_sets`:
  - Opens plan deviation dialog (see below)
- Else:
  - Marks exercise as "Completed"
  - **Smart Navigation** (see below for logic)
  - Exercise shows with checkmark âœ“

---

### Smart Navigation (Post-Finish/Skip)

**Purpose:** Streamline workout flow by automatically navigating to the next exercise instead of always returning to the Active Workout Hub.

#### Navigation Logic

```kotlin
fun navigateAfterExerciseComplete(workout: ActiveWorkout, currentExerciseId: String) {
    val exercises = workout.exercises.sortedBy { it.orderIndex }
    val currentIndex = exercises.indexOfFirst { it.id == currentExerciseId }

    // Find next QUEUED exercise (not completed, not skipped)
    val nextQueuedExercise = exercises
        .drop(currentIndex + 1)  // Look after current
        .firstOrNull { it.status == ExerciseStatus.QUEUED }

    // Also check exercises BEFORE current (user might have skipped earlier ones)
    val anyQueuedExercise = nextQueuedExercise
        ?: exercises.firstOrNull { it.status == ExerciseStatus.QUEUED }

    when {
        anyQueuedExercise != null -> {
            // Go directly to next exercise
            navigateToExerciseDetail(anyQueuedExercise.id)
        }
        else -> {
            // All exercises done â†’ Return to hub (ready to finish workout)
            navigateToActiveWorkoutHub()
        }
    }
}
```

#### Navigation Destinations

| Scenario | Destination | Rationale |
|----------|-------------|-----------|
| Has next QUEUED exercise (after current) | â†’ Exercise Detail (next) | Sequential flow |
| No next, but has earlier QUEUED exercise | â†’ Exercise Detail (that one) | User skipped earlier, remind them |
| All exercises Completed/Skipped | â†’ Active Workout Hub | Ready to finish workout |

#### Transition Animation

**To Next Exercise:**
- Current screen slides out LEFT (200ms)
- Next exercise screen slides in from RIGHT (200ms)
- Creates sense of "progression" through workout

**To Active Workout Hub:**
- Current screen slides out RIGHT (200ms)
- Hub slides in from LEFT (200ms)
- Standard "back" navigation feel

#### Visual Feedback (Before Navigation)

When navigating to next exercise, show brief toast:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Bench Press done Â· Up next: Incline Press              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Toast Specifications:**
- Duration: 1500ms (brief, doesn't block)
- Position: Top of screen (doesn't cover buttons)
- Background: #F0FFF4 (light green tint)
- Text: "âœ“ [Exercise] done Â· Up next: [Next Exercise]"
- Font: 14sp / Medium
- Animation: Fade in (150ms) â†’ Hold â†’ Fade out while navigating

**When All Done (No Next Exercise):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ All exercises complete! ğŸ‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Same styling
- Navigates to hub after toast

#### User Override

**Back Arrow Behavior:**
- User can ALWAYS tap back arrow to return to Active Workout Hub
- Back arrow ignores smart navigation (explicit user intent)
- Rationale: User might want to see full workout state or pick different exercise

---

#### In Edit Mode â†’ "Cancel" Button

- Position: Below Update Set button
- Margin top: 12dp
- Background: Transparent
- Text: "Cancel"
- Text color: #666666
- Font: 14sp / Regular
- Padding: Vertical 12dp

**Behavior:**
- Cancels edit mode
- Removes highlight from set list
- Returns input card to "Log Set [N+1]" state
- Clears input fields or resets to next set values

---

## Button Visual Reference (Quick Comparison)

**For developers: This table shows all button states side-by-side for easy reference**

| Button | State/Context | Background | Border | Text Color | Width | Notes |
|--------|--------------|------------|--------|------------|-------|-------|
| **Log Set** | Always (enabled) | `#A8E6CF` (solid green) | None | `#1A1A1A` | **Full width** | Primary action - always enabled |
| **Log Set** | During animation (800ms) | `#C1DFD1` (light green) | None | `#1A1A1A` | **Full width** | Shows "âœ“ Set Logged" briefly |
| **Skip Exercise** | 0 sets logged | `#E5E5E5` (solid gray) | None | `#666666` | **Full width** | Secondary - neutral action |
| **Finish Exercise** | 1+ sets logged | Transparent | `2dp solid #E5E5E5` | `#666666` | **Full width** | Tertiary - outline style |
| **Update Set** | Edit mode | `#A8E6CF` (solid green) | None | `#1A1A1A` | **Full width** | Same as "Log Set" |
| **Cancel** | Edit mode | Transparent | None | `#666666` | **Full width** | Text button style |

### Visual Hierarchy Summary
1. **Most prominent** â†’ "Log Set" / "Update Set" (solid green, always enabled)
2. **Secondary** â†’ "Skip Exercise" (solid gray, less desirable)
3. **Tertiary** â†’ "Finish Exercise" (outline gray, least prominent)

### Critical Implementation Notes
- âŒ **DO NOT** disable "Log Set" button for empty/zero values
- âŒ **DO NOT** use green color for "Skip Exercise" or "Finish Exercise"
- âŒ **DO NOT** use outline style for "Skip Exercise" (only for "Finish Exercise")
- âœ… **DO** make all buttons full width (not 50% or constrained)
- âœ… **DO** stack buttons vertically

---

## Celebration Animation (On Set Log) - Simplified

**Triggered after:** User taps "Log Set" button and set is successfully saved

**Total Duration:** ~800ms

**Design Principle:** Essential feedback only. No confetti, no ripples, no complex sequences. Just clear confirmation that the action succeeded.

---

### Button State Change (0-800ms)

**Transition (0-200ms):**
- Text changes: "Log Set" â†’ "âœ“ Set Logged"
- Background: #A8E6CF â†’ #C1DFD1 (disabled state)
- Duration: 200ms fade

**Haptic Feedback (at 0ms):**
- Type: Light impact
- iOS: `UIImpactFeedbackGenerator.light()`
- Android: `HapticFeedbackConstants.KEYBOARD_TAP`

**Hold State (200-800ms):**
- Button displays "âœ“ Set Logged"
- Button disabled (prevents double-tap)

**Reset (at 800ms):**
- Text changes back: "âœ“ Set Logged" â†’ "Log Set"
- Button returns to enabled state
- Input card header updates: "RECORD SET 3" â†’ "RECORD SET 4"

---

### Simultaneous Updates

**All happen at once (no phased delays):**

1. **New set appears** in Today's Sets (fade in, 200ms)
2. **Volume count-up** animates to new total (300ms)
3. **Carousel scrolls** to next card (300ms, if visible)

**That's it.** Three things update. Clean, fast, done.

---

### Auto-Scroll Behavior (Post-Log)

**Problem:** When user taps "Log Set" at the bottom of a long screen, they may not see:
- The new set appearing in Today's Sets
- The carousel updating to the next card
- Visual confirmation that their data was saved

**Solution:** Auto-scroll to bring the newly logged set into view.

#### Scroll Target

After logging a set, scroll so that **Today's Sets section + new set item + Input Card** are all visible:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAROUSEL                                                  â”‚
â”‚  [S1 âœ“]  [S2 âœ“]  [S3 â†’]                                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  ğŸ“Š Today: 2 sets Â· 800kg                            â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Today's Sets                                              â”‚
â”‚  Set 1: 50kg Ã— 8  [âœï¸][ğŸ—‘ï¸]                                â”‚
â”‚  â”ƒ Set 2: 50kg Ã— 8  [âœï¸][ğŸ—‘ï¸]  â† NEW! Highlighted         â”‚  ğŸ‘ˆ Scroll target
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  INPUT CARD                                                â”‚
â”‚  RECORD SET 3        â† Ready for next set                  â”‚
â”‚  [50 kg]  [8 reps]                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ LOG SET ]                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Timing Sequence

| Phase | Time | Action |
|-------|------|--------|
| 1 | 0-200ms | Button feedback: "Log Set" â†’ "âœ“ Set Logged" |
| 2 | 200-500ms | Auto-scroll to target position |
| 3 | 200-600ms | New set fades in with highlight pulse |

#### Scroll Animation

```kotlin
fun onSetLogged() {
    // 1. Button state change (immediate)
    buttonState = "âœ“ Set Logged"

    // 2. Auto-scroll after brief delay (let user see button confirmation first)
    delay(200.ms)

    val scrollTarget = when {
        // If all content fits in viewport â†’ no scroll needed
        allContentFitsInViewport -> null

        // Otherwise â†’ scroll to show Today's Sets header with padding
        else -> todaysSetsSection.top - 16.dp
    }

    scrollTarget?.let {
        smoothScrollTo(
            target = it,
            duration = 300.ms,
            easing = FastOutSlowInEasing
        )
    }
}
```

#### New Set Highlight (Visual Confirmation)

When the new set appears in Today's Sets list, apply a brief highlight to confirm the addition:

**Highlight Animation:**
- Background: #F0FFF4 (light green) â†’ #FFFFFF (fade over 400ms)
- Left border: 3dp solid #A8E6CF (appears, then fades over 500ms)
- Total duration: 500ms

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Today's Sets                                              â”‚
â”‚  Set 1: 50kg Ã— 8  [âœï¸][ğŸ—‘ï¸]                                â”‚
â”‚  â”ƒ Set 2: 50kg Ã— 8  [âœï¸][ğŸ—‘ï¸]  â† Green accent border       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘ 3dp green left border (temporary highlight)
```

**Specifications:**
- Left border color: #A8E6CF (LimeGreenDark)
- Left border width: 3dp
- Background tint: #F0FFF4 (very light green)
- Fade duration: 400ms (background), 500ms (border)
- Easing: LinearEasing

#### Scroll Position Logic

```kotlin
val scrollTarget = when {
    // Case 1: Content fits â†’ no scroll needed
    contentHeight <= viewportHeight -> null

    // Case 2: Carousel visible â†’ scroll to show Today's Sets + Input Card
    carouselInViewport -> todaysSetsHeader.top - 16.dp

    // Case 3: Long content â†’ prioritize Today's Sets + Input Card visibility
    else -> todaysSetsHeader.top - 16.dp
}
```

#### Why This Matters

| User Action | Without Auto-Scroll | With Auto-Scroll |
|-------------|---------------------|------------------|
| Taps "Log Set" | Button confirms, but new set may be off-screen | Button confirms + scrolls to show new set |
| Sees feedback | Only button text change | Button + new set highlight + ready for next |
| Mental state | "Did it save?" | "Saved! Ready for Set 3" |

**Rationale:** In a gym environment, users need immediate, clear feedback. Auto-scroll ensures they always see the result of their action, reducing anxiety and building trust.

---

## Skip Exercise Confirmation Dialog (Issue #6)

**Context:** User tapped "Skip Exercise" button (0 sets logged). Confirmation prevents accidental taps.

### Dialog Overlay
- Background dim: Semi-transparent black (#000000), 50% opacity
- Full screen overlay

### Dialog Box
- Background: #FFFFFF (from LightSurface)
- Border radius: 16dp
- Padding: 24dp
- Width: 85% of screen width
- Centered horizontally and vertically
- Shadow: Elevation 8dp

**Icon (Top, centered):**
- Icon: âš ï¸ or question mark symbol
- Color: #FFB86C (orange/warning tone - neutral)
- Size: 40dp
- Margin bottom: 16dp

**Header:**
- Text: "Skip Exercise?"
- Font: 18sp / Bold
- Color: #000000 (from TextOnLight)
- Text alignment: Center
- Margin bottom: 12dp

**Message:**
- Text format: "You haven't logged any sets for [Exercise Name] yet."
- Example: "You haven't logged any sets for Bench Press yet."
- Font: 14sp / Regular
- Color: #666666 (from TextOnLightTertiary)
- Text alignment: Center
- Line height: 20sp
- Margin bottom: 24dp

**Tone:** Neutral, informational, not judgmental

**Buttons (Horizontal layout):**

**Cancel Button (Left, 48% width):**
- Background: Transparent
- Border: 1dp solid #E5E5E5
- Text: "Cancel"
- Text color: #666666
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp
- **Behavior:** Closes dialog, returns to Exercise Detail

**Skip Button (Right, 48% width, 4% margin left):**
- Background: #E5E5E5 (neutral gray, not red)
- Text: "Skip"
- Text color: #666666
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp
- **Behavior:** Marks exercise as "Skipped", navigates to Active Workout

---

**2. Plan Deviation Confirmation Dialog (Issue #6 - Enhanced)**

**Context:** User tapped "Finish Exercise" with 1+ sets logged, but `logged_sets < planned_sets`. Gentle accountability check that now shows WHAT was skipped.

**Trigger Logic:**
```kotlin
if (exercise.isFromPlan && todaysSets.count < exercise.plannedSets.count) {
    showPlanDeviationDialog()
}
```

### Dialog Overlay
- Background dim: Semi-transparent black (#000000), 50% opacity
- Full screen overlay

### Dialog Box
- Background: #FFFFFF (from LightSurface)
- Border radius: 16dp
- Padding: 24dp
- Width: 85% of screen width
- Centered horizontally and vertically
- Shadow: Elevation 8dp

**Layout:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ“‹                               â”‚
â”‚                                               â”‚
â”‚        Finish Exercise?                       â”‚
â”‚                                               â”‚
â”‚      You logged 2 sets! ğŸ’ª                    â”‚
â”‚                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âœ“ Set 1: 10 reps @ 80kg               â”‚  â”‚  â† Logged (green check)
â”‚  â”‚  âœ“ Set 2: 8 reps @ 90kg                â”‚  â”‚
â”‚  â”‚  â—‹ Set 3: 6 reps @ 100kg               â”‚  â”‚  â† Not logged (gray circle)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                               â”‚
â”‚  [Add Set 3]              [Finish Anyway]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Icon (Top, centered):**
- Icon: ğŸ“‹ clipboard OR Material Symbol `assignment`
- Color: #A8E6CF (from LimeGreenDark - plan color, encouraging)
- Size: 40dp
- Margin bottom: 16dp

**Header:**
- Text: "Finish Exercise?"
- Font: 18sp / Bold
- Color: #000000 (from TextOnLight)
- Text alignment: Center
- Margin bottom: 12dp

**Encouragement Line:**
- Text format: "You logged [X] sets! ğŸ’ª"
- Example: "You logged 2 sets! ğŸ’ª"
- Font: 14sp / Medium
- Color: #000000
- Text alignment: Center
- Margin bottom: 16dp

**Tone:** Encouraging ("You logged 2 sets! ğŸ’ª" = positive), not judgmental

---

**Set Progress List (NEW):**

**Container:**
- Background: #F9F9F9 (very light gray)
- Border radius: 8dp
- Padding: 12dp
- Margin bottom: 20dp

**Logged Set Item:**
- Icon: âœ“ (checkmark)
- Icon color: #A8E6CF (green)
- Icon size: 16dp
- Text: "Set [N]: [reps] reps @ [weight]kg"
- Font: 14sp / Regular
- Color: #000000
- Padding vertical: 6dp

**Skipped Set Item:**
- Icon: â—‹ (empty circle)
- Icon color: #CCCCCC (gray)
- Icon size: 16dp
- Text: "Set [N]: [planned_reps] reps @ [planned_weight]kg"
- Font: 14sp / Regular
- Color: #999999 (muted)
- Padding vertical: 6dp

**Purpose:** Shows user exactly what they completed vs what was planned, making the decision informed.

---

**Buttons (Horizontal layout):**

**Add More Sets Button (Left, 48% width - Primary):**
- Background: #A8E6CF (from LimeGreenDark)
- Text: "Add Set [N]" (dynamic: shows next set number)
- Example: "Add Set 3"
- Text color: #1A1A1A
- Font: 14sp / Bold
- Padding: Vertical 12dp
- Border radius: 8dp
- **Behavior:** Closes dialog, returns to Exercise Detail (user can add more sets)

**Finish Anyway Button (Right, 48% width, 4% margin left - Secondary):**
- Background: Transparent
- Border: 1dp solid #E5E5E5
- Text: "Finish Anyway"
- Text color: #666666
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp
- **Behavior:** Marks exercise as "Completed", navigates to Active Workout

---

**Multiple Skipped Sets:**

When user logs 1 set but plan had 4:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Set 1: 10 reps @ 80kg               â”‚
â”‚  â—‹ Set 2: 10 reps @ 85kg               â”‚
â”‚  â—‹ Set 3: 8 reps @ 90kg                â”‚
â”‚  â—‹ Set 4: 6 reps @ 95kg                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Button changes to: "Add Set 2" (next sequential set)

---

**3. Delete Set Confirmation Dialog**

**Context:** User tapped delete icon (Ã—) on a logged set.

**Dialog Box:**
- Background: #FFFFFF
- Border radius: 16dp
- Padding: 24dp
- Width: 85% of screen width
- Centered
- Shadow: Elevation 8dp

**Header:**
- Text: "Delete this set?"
- Font: 18sp / Bold
- Color: #000000
- Margin bottom: 12dp

**Message:**
- Text: "This action cannot be undone."
- Font: 14sp / Regular
- Color: #666666
- Margin bottom: 24dp

**Buttons (Horizontal):**

**Cancel Button (Left, 48%):**
- Background: Transparent
- Border: 1dp solid #E5E5E5
- Text: "Cancel"
- Text color: #666666
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp

**Delete Button (Right, 48%, 4% margin left):**
- Background: #FF9999 (from ErrorRed)
- Text: "Delete"
- Text color: #FFFFFF
- Font: 14sp / Medium
- Padding: Vertical 12dp
- Border radius: 8dp
- **Behavior:** Deletes set, updates volume display, re-numbers remaining sets

### </exercise_detail_screen>

---

## Haptic Feedback Reference (Minimal)

**Design Principle:** Haptics provide tactile confirmation. Use sparingly - only for primary actions.

| Event | Haptic Type | iOS | Android |
|-------|-------------|-----|---------|
| Log Set button tap | Light | `UIImpactFeedbackGenerator.light()` | `KEYBOARD_TAP` |
| Carousel card snap | Light | `light()` | `CONTEXT_CLICK` |
| All planned sets done | Medium | `UINotificationFeedbackGenerator.success()` | `CONFIRM` |

**Removed:** No toasts, no confetti, no badges, no milestone celebrations, no "Great start!" messages.

**Why:** Users in the gym want to log quickly and move on. Excessive celebrations slow them down and become annoying after the 3rd workout. The data appearing in the list IS the confirmation.

---

## 4. Notes
*   **Developer Notes**:
    *   **State Management**
    ```kotlin
    data class ExerciseDetailState(
        val exercise: WorkoutExercise,
        val historicalSets: List<ExerciseSet> = emptyList(),
        val todaysSets: List<ExerciseSet> = emptyList(),
        val isEditMode: Boolean = false,
        val editingSetIndex: Int? = null,
        val totalVolume: Int = 0
    )
    ```

    *   **Volume Calculation**
    ```kotlin
    val totalVolume = todaysSets.sumOf { it.weight * it.reps }.toInt()

    val animatedVolume by animateIntAsState(
        targetValue = totalVolume,
        animationSpec = tween(durationMillis = 300, easing = LinearEasing)
    )
    ```

    *   **Pre-fill Logic**
    ```kotlin
    fun getPreFillValues(setNumber: Int): Pair<Double, Int> {
        // 1. Check current workout
        if (todaysSets.isNotEmpty()) {
            return todaysSets.last().let { it.weight to it.reps }
        }

        // 2. Check history
        if (historicalSets.size >= setNumber) {
            return historicalSets[setNumber - 1].let { it.weight to it.reps }
        }

        // 3. Default empty
        return 0.0 to 0
    }
    ```
*   **Edge Cases**:
    *   **Scenario 1: User Edits Set While Logging New Set**
    **Behavior:**
    - Cancel new set input (unsaved)
    - Switch to edit mode for selected set
    - Pre-fill input with set's current values

    *   **Scenario 2: User Deletes All Sets**
    **Behavior:**
    - Volume resets to 0kg
    - "Finish Exercise" button disappears
    - "Skip Exercise" button appears
    - Today's Sets section shows "No sets logged yet"

    *   **Scenario 3: User Navigates Away Mid-Set**
    **Behavior:**
    - Input values NOT saved (only saved sets persist)
    - Returns to Active Workout
    - Exercise stays "In Progress" (with previously logged sets)
    - When reopened, pre-fill uses last logged set
*   **Revision History**:
    *   **2025-12-03: UX Improvements - Footer Merge, Auto-Scroll, Smart Navigation**
    - **MERGED**: Volume Display + "Today: X sets logged" into unified carousel footer
      - Before: 3 separate UI elements (carousel footer, floating volume, Today's Sets header)
      - After: 1 carousel footer with `ğŸ“Š Today: X set(s) Â· Ykg` format
    - **UPDATED**: Carousel footer spec with full styling details
      - Container: Subtle divider, #F9F9F9 background
      - Text format with proper grammar ("1 set" vs "2 sets")
      - Volume animation preserved (count-up on set logged)
    - **ADDED**: Fallback for hidden carousel (first-time custom exercise)
      - Standalone progress indicator above Today's Sets section
    - **ADDED**: Auto-Scroll Behavior (Post-Log)
      - After logging a set, auto-scroll to show newly added set in Today's Sets
      - Timing: 200ms delay (button feedback) â†’ 300ms scroll animation
      - New set highlight: Green left border + background tint (fades over 500ms)
      - Ensures user always sees feedback, even on long screens
    - **ADDED**: Smart Navigation (Post-Finish/Skip)
      - "Finish Exercise" and "Skip Exercise" now intelligently navigate to next exercise
      - If QUEUED exercise exists â†’ Go directly to it (no hub detour)
      - If all exercises done â†’ Return to Active Workout Hub
      - Toast feedback: "âœ“ [Exercise] done Â· Up next: [Next]"
      - Transition animations: Slide left for next, slide right for hub
      - Back arrow always returns to hub (user override)
    - **UPDATED**: Input Fields section with GymNumpad component reference
      - Added link to `designer/components/gym-numpad.md`
      - Replaced duplicated styling specs with usage examples
    - **RATIONALE**: Streamline workout flow, reduce navigation steps, gym efficiency.

    *   **2025-12-02 (v2): UX Simplification - Reducing Animation Fatigue**
    - **SIMPLIFIED**: Carousel now shows EITHER Plan OR History (contextual, not both)
      - `PLAN_PROGRESSION` mode for plan-based exercises
      - `HISTORY_REFERENCE` mode for custom exercises with history
      - `HIDDEN` mode for first-time custom exercises
    - **REMOVED**: Excessive animations
      - âŒ Current card pulsing border
      - âŒ Arrow bounce animation
      - âŒ Success ripple effect
      - âŒ Background pulse on button
      - âŒ Confetti bursts (every 3rd set, volume PR, etc.)
      - âŒ Volume delta indicator (+600kg)
      - âŒ Volume progress bar and milestones
      - âŒ Today's Sets highlight pulse
      - âŒ Predicted volume in input card
      - âŒ All toasts ("Great start!", "Matched!", "New PR!")
      - âŒ All celebration badges
    - **KEPT**: Essential feedback only
      - âœ… Button state change (Log Set â†’ âœ“ Set Logged)
      - âœ… Set appears in list (simple fade)
      - âœ… Volume count-up animation (300ms)
      - âœ… Carousel scroll (300ms)
      - âœ… Light haptic on button tap
    - **RATIONALE**: Users in gym want fast logging, not celebrations. Animation fatigue is real. 15+ animations â†’ 5 essential ones.
    - **REVIEWED BY**: UX critique revealed cognitive overload and buried core function (input card)

    *   **2025-12-02 (v1): Initial Set Carousel Design**
    - Added Horizontal Set Carousel (later simplified in v2)
    - Added Delight Moments (removed in v2)
    - Added Volume enhancements (simplified in v2)
    - **REVIEWED BY**: Styler (ui-visual-critic agent)

    *   **2025-11-26: Plan Mode Redesign (Per-Set Targets Support)**
    - **REDESIGNED**: Plan Display â†’ Plan Progress Indicator ("ğŸ“‹ 3 sets planned (0/3)")
      - Simplified from full values to just set count + progress
      - Less cognitive load, cleaner screen
    - **ADDED**: Per-Set Plan Suggestion in input card
      - Contextual suggestion based on current set being logged
      - Shows when meaningful (no history OR plan differs from history)
      - [Use] button to quick-apply plan values
    - **UPDATED**: Pre-fill logic to include plan as fallback
      - History first (user autonomy)
      - Plan values as fallback when no history (helpful starting point)
    - **ENHANCED**: Plan Deviation Dialog
      - Now shows visual checklist of completed vs skipped sets
      - User sees exactly what they're skipping (e.g., "â—‹ Set 3: 6 Ã— 100kg")
      - Button changed to "Add Set [N]" (specific)
    - **PURPOSE**: Support per-set targets from 5.04-target-config (pyramid, drop sets, etc.)

    *   **2025-11-07: Implementation Review & Enhanced Documentation**
    - âœ… Reviewed dev team implementation against specifications
    - âœ… Confirmed all button specifications are correct and comprehensive
    - Added visual comparison table showing all button states side-by-side
    - Added "CRITICAL" markers to all full-width requirements
    - Added "Critical Implementation Notes" checklist with DO/DO NOT rules
    - Created dev team feedback document: `summaries/20251107_review_exercise_detail_button_fixes.md`
    - **Verification**: 95% of implementation correct, 4 button styling issues found (all already specified in this doc)

    *   **2025-11-06: Button State Refinements**
    - Added disabled button color specification: `#C1DFD1` (LimeGreenDisabled)
    - Clarified button should ONLY be disabled during 800ms animation (not for empty fields)
    - Emphasized "Skip Exercise" button must use solid gray background (not outline)
    - Added visual notes to prevent implementation deviations

    *   **2025-01-05: Critical UX Fixes**
    - Added Skip Exercise button (0 sets) with confirmation (Issue #6)
    - Added Plan Deviation dialog for accountability (Issue #6)
    - Added Plan Display section (reference only) (Issue #3)
    - Updated pre-fill logic (history over plan) (Issue #3)

    *   **2025-01-03: Enhanced Set Logging**
    - Added Volume tracking component with animations
    - Added celebration animation on set logging
    - Enhanced layout with better information hierarchy
    - Added edit/delete functionality for logged sets

    *   **2025-01-05: Documentation Restructure**
    - Extracted from workout_process.md into dedicated file
    - Following onboarding convention (screen-centric organization)
    - All related dialogs (skip, plan deviation, delete set) now live in this file
```
