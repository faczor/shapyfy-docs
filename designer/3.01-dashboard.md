---
tags:
  - mobile
  - dashboard
screen: Dashboard
agent: "[[designer]]"
feature: "[[features/3-dashboard]]"
design_state: "[[Statuses/Finished]]"
---
# 3.01 - Dashboard Design

> **Parent Feature**: [3-dashboard.md](../features/3-dashboard.md)
> **Navigation**: See [00-app-overview.md](../features/00-app-overview.md) for complete flows

## 1. Visual Preview
> [!TIP]
> *[Insert Screen Mockup Here]*
> *For now, we can use a placeholder or a Mermaid diagram if applicable.*

## 2. Human-Readable Summary
**User Behavior**
The Dashboard is the central hub. It adapts based on the user's journey.
*   **New/Lapsed User**: Sees an inviting "Empty State" encouraging them to start a plan or build a workout.
*   **Active User**: Sees their weekly progress (visualized as a liquid fill chart) and quick access to resume drafts or start workouts.

**Key Cases**
*   **Empty State**: No history, no plan. Shows "Let's try again!" with path choices.
*   **Standard Layout**: Has history. Shows "This Week" stats and "Resume Draft" (if applicable).

**Data Displayed**
*   **Weekly Volume**: Total tonnes lifted vs goal.
*   **Comparison**: Progress vs last week (e.g., "+2.2t from last week").
*   **Drafts**: Unfinished workout banner.

## 3. Detailed Designer Specification
### <dashboard_screen>

#### Empty State Layout
**Condition**: `hasWorkoutHistory == false && activePlan == null`

**Background:**
- **Type**: Radial gradient
- **Colors**:
  - Center: #FF5555 (bright coral)
  - Mid-point: #FF8888 (40% from center)
  - Edge: #A8E6CF (lime green)
- **Center position**: Offset (0.3f, 0.3f)
- **Radius**: 350f
- **Animation**:
  - Center moves from (0.3f, 0.3f) to (0.7f, 0.7f)
  - Duration: 8 seconds
  - Easing: Cubic ease-in-out
  - Loop: Infinite
  - **Note**: Less elaborate than onboarding first-time screen (no particles)
  - **Accessibility**: Static if "reduce motion" enabled

**Content (Centered):**
- **Logo (Top Center)**
  - **Position**: Top center
  - **Text**: "Shapyfy!"
  - **Font**: 32sp / Bold
  - **Color**: #FFFFFF
  - **Padding top**: 40dp
  - **Drop shadow**:
    - Color: #000000 with 20% opacity
    - Offset Y: 2dp
    - Blur radius: 8dp

- **Hero Section (Vertically Centered)**
  - **Headline**
    - **Text**: "Let's try again!"
    - **Font**: 32sp / Bold
    - **Color**: #FFFFFF
    - **Text alignment**: Center
    - **Text shadow**:
      - Color: #000000 with 30% opacity
      - Offset Y: 4dp
      - Blur radius: 12dp
    - **Margin bottom**: 12dp

  - **Subtext**
    - **Text**: "Choose how you want to train"
    - **Font**: 16sp / Regular
    - **Color**: #FFFFFF
    - **Text alignment**: Center
    - **Text shadow**:
      - Color: #000000 with 20% opacity
      - Offset Y: 2dp
      - Blur radius: 6dp
    - **Margin bottom**: 48dp

**Buttons (Stacked):**
- **Action Buttons (Centered, Stacked)**
  - **Path A Button (Primary)**
    - **Text**: "Get Workout Plan"
    - **Background**: #FFFFFF
    - **Text color**: #1A1A1A (from TextOnLight)
    - **Font**: 16sp / Bold
    - **Padding**: Vertical 16dp, Horizontal full width (minus 32dp container padding)
    - **Border radius**: 12dp
    - **Shadow**: Elevation 8dp
    - **Margin bottom**: 12dp
    - **Behavior**: Navigate to Personalization Questions (onboarding Path A flow)

  - **Path B Button (Secondary)**
    - **Text**: "Build My Own"
    - **Background**: Transparent
    - **Border**: 2dp solid #FFFFFF
    - **Text color**: #FFFFFF
    - **Font**: 16sp / Medium
    - **Padding**: Vertical 14dp, Horizontal full width (minus 32dp container padding)
    - **Border radius**: 12dp
    - **Behavior**: Navigate to Exercise Picker (workout process)

**Animation (Screen Load)**
- **Sequence** (staggered entrance):
  1. Background gradient fades in (0-200ms)
  2. Logo fades in (200-400ms)
  3. Headline scales in (400-700ms, spring animation)
  4. Subtext fades in (600-800ms)
  5. Buttons slide up + fade in (800-1100ms)
- **Total**: ~1.1 seconds
- **Accessibility**: Instant appearance if "reduce motion" enabled

#### Standard Layout
**Condition**: `hasWorkoutHistory == true OR activePlan != null`

**Top Bar:**
- **Background**: #FFFFFF (from LightSurface)
- **Height**: 56dp
- **Shadow**: Elevation 2dp
- **Padding**: 16dp horizontal

  - **Logo (Left)**
    - **Text**: "Shapyfy!"
    - **Font**: 20sp / Bold
    - **Color**: #000000 (from TextOnLight)
    - **Position**: 16dp from left edge

  - **Profile Icon (Right) - Future Feature**
    - **Icon**: User avatar or initials circle
    - **Size**: 32dp
    - **Color**: #CCCCCC (placeholder)
    - **Position**: 16dp from right edge
    - **Tap behavior**: Opens profile/settings (future implementation)

**Content Area:**
- **Background**: #F3F3F8 (from LightBackground)
- **Padding**: 16dp horizontal, 16dp top, 80dp bottom (space for bottom safe area)
- **Scrollable**: Vertical (LazyColumn)

**1. Resume Draft Banner (Conditional)**
- **Visibility**: `if (draftWorkout != null)`
- **Position**: First element in content area (highest priority)
- **Design**: Same as current implementation (no changes)
- **Margin bottom**: 16dp

**2. This Week Hero Card**
- **Visibility**: `if (thisWeekStats != null)` (i.e., user has workout history)
- **Position**: After draft banner (if exists), otherwise first element
- **Purpose**: Motivate through progress visualization and self-competition

  - **Container**
    - **Background**: #FFFFFF (from LightSurface)
    - **Border radius**: 16dp
    - **Padding**: **16dp all sides** (v2.1: reduced from 20dp for 8dp rhythm consistency)
    - **Margin bottom**: 16dp
    - **Shadow**: **Custom: 0 2dp 8dp rgba(0,0,0,0.10)** (v2.1: changed from elevation 3dp for better definition)

  - **Header**
    - **Text**: "This Week"
    - **Font**: 18sp / Bold
    - **Color**: #000000 (from TextOnLight)
    - **Margin bottom**: 12dp

  - **Goal Label**
    - **Text**: "Goal: 10 tonnes"
    - **Font**: **16sp / Medium** (v2.1: increased from 14sp Regular for better hierarchy)
    - **Color**: #666666 (from TextOnLightTertiary)
    - **Margin bottom**: 16dp

  - **Visual Progress Indicator (Enhanced Liquid Container)**
    - **Style**: Vertical container (liquid filling from bottom to top) with animated bubbles and wave effects

    - **Container Box**
      - **Width**: **55% of card width** (v2.1: reduced from 60%, centered)
      - **Height**: **170dp** (v2.1: increased from 150dp - more presence without grid metrics)
      - **Border**: 3dp solid #CCCCCC
      - **Border radius**: **8dp** (v2.1: reduced from 12dp for clearer hierarchy)
      - **Background**: #F9F9F9 (light gray, empty space)
      - **Visual Effects**:
        - **Inner shadow**: Creates depth (black 10% opacity, radial gradient from edges)
        - **Corner highlights**: Small white circles (30% opacity, 6dp radius) at top corners for glass reflection effect

    - **Scale Labels (Left side of container)**
      - **Position**: Left of container, vertically aligned
      - **Labels**: "10t", "8t", "6t", "4t", "2t"
      - **Font**: 12sp / Medium
      - **Color**: **#666666** (v2.1: changed from #999999 for WCAG AA compliance - 4.5:1 contrast)

    - **Fill (Animated with Bubbles & Wave)**
      - **Position**: Bottom of container, fills upward
      - **Height**: Percentage of container height (e.g., 72% = 122.4dp of 170dp)
      - **Background**: Enhanced gradient vertical
        - Bottom: #A8E6CF (LimeGreenDark)
        - Middle: **#B0EDD5** (v2.1: adjusted from #B8F0D9 for higher contrast)
        - Top: #CBFFC9 (LimeGreenBright) + subtle glow effect
      - **Border radius**: **8dp** (v2.1: matches container for hierarchy)

    - **Fill Animation** (on screen load):
      - **Duration**: 1200ms (smooth ease)
      - **Easing**: **EaseOutQuart** (v2.1: replaced spring bounce for calm feel)
      - **Effect**: Liquid fills from 0% to target % (e.g., 72%)
      - **Removed**: Playful overshoot/bounce (v2.1: too hyperactive)

    - **Bubble Animation (Inside Liquid)**
      - **Purpose**: Add **subtle** visual energy to the liquid (v2.1: emphasis on subtlety)
      - **Bubble Specifications**:
        - **Count**: **6 bubbles maximum** (v2.1: reduced from 8-12 for cleaner look)
        - **Size range**: **4dp to 6dp diameter** (v2.1: narrower range from 3-7dp)
        - **Positioning**: Randomly distributed within liquid bounds
        - **Movement**: Rise from bottom to top, then respawn at bottom
        - **Opacity**: **30% to 50%** (v2.1: reduced from 40-70% for subtlety)
        - **Color**: White (#FFFFFF with low opacity)

    - **Wave Animation (Top Surface of Liquid)**
      - **Purpose**: **Barely perceptible** motion on liquid surface for subtle life (v2.1: emphasis on subtlety)
      - **Wave Specifications**:
        - **Amplitude** (v2.1: all reduced by half for subtlety):
          - Exceeding goal (>100%): **6dp** (gentle waves, reduced from 12dp)
          - Close to goal (75-100%): **4dp** (subtle waves, reduced from 8dp)
          - Normal (<75%): **2dp** (nearly imperceptible, reduced from 4dp)
        - **Frequency**: 2 complete wave cycles across container width
        - **Speed**: **3000ms per cycle** (v2.1: slowed from 2000ms for subtlety)
        - **Style**: Smooth sine function

    - **Overflow Handling (If > 100%)**
      - **When**: `currentVolume > goalVolume` (e.g., 12 tonnes / 10 tonnes = 120%)
      - **Visual Changes** (v2.1: simplified for premium feel):
        - Fill extends above container top (overflow visible)
        - Fill color changes to **single gold**: **#FFB800** (v2.1: simplified from 3-color gradient)
        - **Glow effect**: 4dp blur with 20% opacity around overflow portion
        - Container border changes to **#FFB800** (v2.1: matches fill, changed from #FFD700)
        - **Bubbles**: FAST speed (2000ms)
        - **Confetti**: ❌ **REMOVED** (v2.1: too tacky)
        - **Wave**: Maximum amplitude (6dp, v2.1: reduced from 12dp)

  - **Stats Display (Below Container)**
    - **Primary Volume Display - ENHANCED**
      - **Position**: Center-aligned below container
      - **Margin top**: 16dp
      - **Typography** (v2.1: refined hierarchy for balance):
        - **Primary number**: "[X] tonnes" (e.g., "7.2 tonnes")
          - Font: **24sp / Bold** (v2.1: reduced from 28sp for better balance)
          - Color: #000000 (or **#FFB800** if >100%, v2.1: changed from #FFD700)
          - Format: 1 decimal place
        - **Secondary text**: "[Y]% to goal" (e.g., "72% to goal")
          - Font: 16sp / Regular
          - Color: #666666
          - Padding top: 4dp
          - **If >100%**: Change to "Goal exceeded!" (gold color **#FFB800**, v2.1: emoji will be in icon)
      - **Animation** (counter):
        - Counts from 0.0t to 7.2t during fill animation
        - Duration: 1.2 seconds (matches fill)

    - **Adaptive Comparison Messaging - ENHANCED (v2.1)**
      - **Visibility**: Always shown
      - **Margin top**: **16dp** (v2.1: increased from 12dp for breathing room)
      - **Margin bottom**: **24dp** (v2.1: increased from 20dp - card ends here, needs proper closure)
      - **Format**: 2-line message with **Material Symbols Rounded icon** + comparison text + encouragement
      - **Icon Specifications** (v2.1: NOT emojis):
        - **Library**: Material Symbols Rounded
        - **Weight**: 500
        - **Grade**: 0 (normal)
        - **Size**: 20dp
        - **Margin right**: 8dp (spacing from text)
      - **Message Scenarios** (adaptive based on performance):
        - **Scenario 1: Significant Improvement (>20% increase)**
          ```
          [Flame Icon] +2.2t from last week!
          You're on fire! Keep crushing it!
          ```
          - **Icon**: Material Symbol "local_fire_department" (Rounded, weight 500, 20dp)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #4CAF50 (green)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Bubble speed**: FAST (2000ms)
        - **Scenario 2: Moderate Improvement (5-20% increase)**
          ```
          ↗ +0.8t from last week
          Great progress! Keep it up!
          ```
          - **Symbol**: ↗ (unicode arrow - acceptable as-is)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #4CAF50 (green)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Bubble speed**: NORMAL (3000ms)
        - **Scenario 3: Stable (-5% to +5%)**
          ```
          ➡️ Similar to last week
          Consistency builds strength! [Dumbbell Icon]
          ```
          - **Symbol**: ➡️ (unicode arrow - acceptable as-is)
          - **Icon**: Material Symbol "fitness_center" (Rounded, weight 500, 16dp inline)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #666666 (gray)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Bubble speed**: SLOW (5000ms)
        - **Scenario 4: Moderate Decrease (-5% to -20%)**
          ```
          ↘ -1.2t from last week
          Life happens! Jump back in! [Target Icon]
          ```
          - **Symbol**: ↘ (unicode arrow - acceptable as-is)
          - **Icon**: Material Symbol "target" (Rounded, weight 500, 16dp inline)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #FF9800 (orange, NOT red)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Tone**: Supportive, not judgmental
          - **Bubble speed**: SLOW (5000ms)
        - **Scenario 5: Significant Decrease (<-20%)**
          ```
          ↓ -3.5t from last week
          Tough week? Let's get back on track! [Dumbbell Icon]
          ```
          - **Symbol**: ↓ (unicode arrow - acceptable as-is)
          - **Icon**: Material Symbol "fitness_center" (Rounded, weight 500, 16dp inline)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #FF9800 (orange, NOT red)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Tone**: Encouraging comeback, hopeful
          - **Bubble speed**: NONE (no bubbles, quiet reflection)
        - **Scenario 6: First Week (no comparison data)**
          ```
          [Sparkle Icon] First week complete!
          You're building your baseline! [Rocket Icon]
          ```
          - **Icons**: Material Symbols "auto_awesome" + "rocket_launch" (Rounded, weight 500, 16dp inline)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), #666666 (gray)
          - **Line 2**: **15sp / Regular** (v2.1: increased from 14sp), #666666 (gray)
          - **Tone**: Encouraging establishment
          - **Bubble speed**: NORMAL (3000ms)
        - **Scenario 7: Exceeded Goal (>100%)**
          ```
          [Celebration Icon] 12 tonnes!
          +2t OVER GOAL! You crushed it! [Trophy Icon]
          ```
          - **Icons**: Material Symbols "celebration" + "emoji_events" (Rounded, weight 500, 16dp inline)
          - **Line 1**: **15sp / Medium** (v2.1: increased from 14sp), **#FFB800** (v2.1: changed from #FFD700)
          - **Line 2**: **15sp / Bold**, **#FFB800** (v2.1: changed from #FFD700)
          - **Tone**: Maximum celebration
          - **Bubble speed**: FAST (2000ms, v2.1: no confetti)
          - **Note**: Secondary text shows "Goal exceeded!" instead of "% to goal"
      - **Implementation Note** (v2.1): ALL icons are Material Symbols Rounded (weight 500). Unicode arrows (↗↘↓➡️) are acceptable as-is. NO emoji placeholders will ship in MVP.

**3. Plan Hub / Program Card Slot**
- **Position**: Below "This Week" card.

**State A: Active Plan (Program Card)**
- **Condition**: `activePlan != null`
- **Container**:
  - **Background**: #FFFFFF
  - **Border radius**: 16dp
  - **Padding**: 16dp
  - **Shadow**: Custom 0 2dp 8dp rgba(0,0,0,0.10)
- **Content**:
  - **Eyebrow**: "Current Plan" (12sp, #666666)
  - **Title**: "[Plan Name]" (18sp, Bold, #000000)
  - **Subtitle**: "Week [X] • Day [Y]" (14sp, #666666)
  - **Progress**: Linear progress bar (Workouts completed / Total in cycle)
- **Action (Top Right)**: "Manage" (Text button, #4CAF50) -> Navigates to `5.01-plan-library` (Active plan expanded).

**State B: No Active Plan (Plan Hub)**
- **Condition**: `activePlan == null`
- **Container**: Same as above.

    **Variant B1: Empty Library (No saved plans)**
    - **Title**: "Need structure?" (18sp, Bold)
    - **Layout**: Two stacked buttons or side-by-side.
    - **Buttons**:
      1.  **Get AI Plan** (Primary, Filled) -> `1.05-personalization`
      2.  **Build from Scratch** (Secondary, Outlined) -> `5.02-plan-builder-setup`

    **Variant B2: Populated Library (Has saved plans)**
    - **Title**: "Workout Plans" (18sp, Bold)
    - **Layout**: Row with "Open Library" as primary.
    - **Buttons**:
      1.  **My Plans** (Primary, Icon: Folder) -> `5.01-plan-library`
      2.  **Create New** (Secondary, Icon: Add) -> `5.02-plan-builder-setup`

**4. Primary Action Button (Fixed Bottom)**
- **Position**: Fixed at bottom of screen, above system navigation
- **Background**: #FFFFFF (LightSurface)
- **Shadow**: Elevation 8dp (upward shadow)
- **Padding**: 16dp all sides
- **Z-index**: Above scrollable content

**Button Behavior - Conditional:**

**Condition A: Active Plan Exists (`activePlan != null`)**
- **Text**: "Start Day [X]: [Day Name]"
  - Example: "Start Day 3: Legs Workout"
  - Dynamic from: `activePlan.currentDayIndex` and `activePlan.days[currentDayIndex].name`
- **Background**: #2D7A5F (Functional Primary)
- **Text Color**: #FFFFFF
- **Font**: 18sp / Bold
- **Padding**: 16dp vertical
- **Border radius**: 12dp
- **Width**: Full width

**Tap Behavior:**
- Haptic: Medium impact
- Navigate to: **Workout Preview (5.05)**
- Pass data: Plan ID, Current Day Index, Day exercises
- Workout Preview shows: "Today's Workout" with day's exercise list
- User can then tap "Start Workout" → Active Workout (2.02)

**Condition B: No Active Plan (`activePlan == null`)**
- **Text**: "Start New Workout"
- **Background**: #2D7A5F (Functional Primary)
- **Text Color**: #FFFFFF
- **Font**: 18sp / Bold
- **Padding**: 16dp vertical
- **Border radius**: 12dp
- **Width**: Full width

**Tap Behavior:**
- Haptic: Medium impact
- Navigate to: Exercise Picker (2.01)
- Start custom workout flow
- No plan reference

**Pressed State (Both Conditions):**
- Scale: 0.98
- Background: #257055 (darker shade)
- Duration: 100ms

### </dashboard_screen>

## 4. Notes
*   **Developer Notes**:
    *   **Animation Implementation**:
        ```kotlin
        @Composable
        fun AnimatedVolumeContainer(
            progress: Float, // 0.0 to 1.2 (allows overflow)
            isOverGoal: Boolean
        ) {
            val animatedProgress by animateFloatAsState(
                targetValue = progress.coerceIn(0f, 1.2f),
                animationSpec = spring(
                    dampingRatio = Spring.DampingRatioMediumBouncy,
                    stiffness = Spring.StiffnessLow
                ),
                label = "volumeProgress"
            )

            Canvas(modifier = Modifier.size(width = 200.dp, height = 180.dp)) {
                val fillHeight = size.height * animatedProgress

                // Draw container border
                drawRoundRect(
                    color = if (isOverGoal) Color(0xFFFFD700) else Color(0xFFCCCCCC),
                    style = Stroke(width = 3.dp.toPx()),
                    cornerRadius = CornerRadius(12.dp.toPx())
                )

                // Draw fill (gradient)
                val gradient = if (isOverGoal) {
                    Brush.verticalGradient(
                        colors = listOf(Color(0xFFFFD700), Color(0xFFFFA500))
                    )
                } else {
                    Brush.verticalGradient(
                        colors = listOf(Color(0xFFA8E6CF), Color(0xFFCBFFC9))
                    )
                }

                drawRoundRect(
                    brush = gradient,
                    topLeft = Offset(0f, size.height - fillHeight),
                    size = Size(size.width, fillHeight),
                    cornerRadius = CornerRadius(12.dp.toPx())
                )
            }
        }
        ```
    *   **Data Sources**: Requires aggregation of last 7 days' volume vs previous 7 days.
*   **Navigation Flows**:
    *   **With Active Plan**: Dashboard → [Start Day X] → Workout Preview (5.05) → [Start Workout] → Active Workout (2.02)
    *   **Without Active Plan**: Dashboard → [Start New Workout] → Exercise Picker (2.01) → Active Workout (2.02)
    *   **Plan Management**: Dashboard → [Manage] (on Program Card) → Plan Library (5.01)
    *   **Get Plan**: Dashboard → [Get AI Plan] → Personalization (1.05) → Recommendations (1.06) → Plan Preview (1.07) → [Activate Plan] → Dashboard
*   **Related Screens**:
    *   [[5.05-workout-preview]] - Shown when user taps "Start Day X" with active plan
    *   [[5.01-plan-library]] - Shown when user taps "Manage" on Program Card
    *   [[1.05-personalization]] - Entry to AI plan recommendations
    *   [[5.02-plan-builder-setup]] - Manual plan creation
    *   [[2.01-exercise-picker]] - Custom workout creation
*   **Revision History**:
    *   **v2.1**: Refined visual hierarchy, reduced animation chaos (slower waves, fewer bubbles), updated colors for WCAG AA compliance, switched to Material Symbols Rounded.
