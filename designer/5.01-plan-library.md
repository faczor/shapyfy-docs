---
tags:
  - mobile
  - planning
  - workout-plan
screen: Plan Library
agent: "[[designer]]"
feature: "[[features/5-workout-plan]]"
design_state: "[[Statuses/Finished]]"
---
# 5.01 - Plan Library

> **Navigation:**
> - FROM: Dashboard → "My Plans" / "Manage Plan"
> - FROM: Settings → "Workout Plans"
> - TO: Plan Builder Setup (5.02) (on "Create New Plan")
> - TO: Plan Preview (5.06) (on tap any plan card)
> - TO: Plan Builder Days (5.03) (on edit active plan)
>
> **Belongs to:** [[features/5-workout-plan]]

## 1. Visual Preview

> [!TIP]
> **Plan Library - With Active Plan**
> ```
> ┌─────────────────────────────────────────────────────────────┐
> │  [←]                    My Plans                            │
> ├─────────────────────────────────────────────────────────────┤
> │                                                             │
> │  ╔═══════════════════════════════════════════════════════╗ │
> │  ║  [glow border]                                        ║ │
> │  ║  ACTIVE                                    Week 2     ║ │
> │  ║  ──────────────────────────────────────────────────── ║ │
> │  ║  Push/Pull/Legs                                       ║ │
> │  ║  7 days · 28 exercises                                ║ │
> │  ║                                                       ║ │
> │  ║  Next: Day 3 - Legs                        [>]        ║ │
> │  ║  ▓▓▓▓▓▓▓░░░░░ 5/7                                     ║ │
> │  ╚═══════════════════════════════════════════════════════╝ │
> │                                                             │
> │  ─────────────────────────────────────────────────────────  │
> │                                                             │
> │  Saved Plans                                            2   │
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  Upper/Lower Split                            [:]   │   │
> │  │  4 days · 20 exercises · Last used 2 weeks ago      │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  Full Body Beginner                           [:]   │   │
> │  │  3 days · 15 exercises · Never used                 │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  [+]  Create New Plan                               │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> └─────────────────────────────────────────────────────────────┘
> ```
>
> **Plan Library - Empty State**
> ```
> ┌─────────────────────────────────────────────────────────────┐
> │  [←]                    My Plans                            │
> ├─────────────────────────────────────────────────────────────┤
> │                                                             │
> │                                                             │
> │                                                             │
> │                     [icon: calendar_month]                  │
> │                         (bouncing)                          │
> │                                                             │
> │                   No plans yet                              │
> │                                                             │
> │              Your first structured routine                  │
> │                   is just a tap away.                       │
> │                                                             │
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  [auto_awesome]  Get Recommendations                 │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  [+]  Build from Scratch                            │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> │                                                             │
> └─────────────────────────────────────────────────────────────┘
> ```
>
> **Plan Library - With Draft Banner**
> ```
> ┌─────────────────────────────────────────────────────────────┐
> │  [←]                    My Plans                            │
> ├─────────────────────────────────────────────────────────────┤
> │                                                             │
> │  ┌─────────────────────────────────────────────────────┐   │
> │  │  [edit] Draft: "Upper/Lower"               [Resume] │   │
> │  │  Last edited 2 days ago                   [Discard] │   │
> │  └─────────────────────────────────────────────────────┘   │
> │                                                             │
> │  ╔═══════════════════════════════════════════════════════╗ │
> │  ║  ACTIVE                                    Week 1     ║ │
> │  ║  ...                                                  ║ │
> │  ╚═══════════════════════════════════════════════════════╝ │
> │                                                             │
> └─────────────────────────────────────────────────────────────┘
> ```

## 2. Human-Readable Summary

**User Behavior**

The Plan Library is the central hub for managing all workout plans. Users come here to view their active plan, browse saved plans, switch between plans, or create new ones. The active plan is prominently displayed with progress information, while inactive plans are listed below for easy access.

**Key Cases**
*   **Active Plan Present**: Hero card at top showing current progress (day, week, completion).
*   **Multiple Saved Plans**: List of inactive plans below active card.
*   **Empty State**: No plans yet - encouraging message with two clear paths (AI or manual).
*   **Draft Present**: Banner at top prompting to resume or discard incomplete plan.
*   **No Active Plan**: Active card slot shows "No active plan" with "Activate" prompt.

**Data Displayed**
*   **Active Plan Card**: Plan name, day count, exercise count, current week, next day, progress bar.
*   **Inactive Plan Cards**: Plan name, day count, exercise count, last used date.
*   **Draft Banner**: Plan name (if set), last edited timestamp.

**Interaction & Motion**
Hub feel with clear hierarchy. Active plan card has subtle glow to draw attention. Inactive cards have swipe-to-delete. Entry animation staggers cards for visual interest. Tapping inactive plan opens preview; tapping active plan opens edit mode.

---

## 3. Detailed Designer Specification

### <plan_library_screen_dark>

**Design Version**: v1.0 (2025-01-XX)
**Default Theme**: Dark Mode (per Brand DNA "Dark Mode is Hero")
**Font Family**: Montserrat (all text)

---

#### Screen Background

**Color**: #2D3142 (DarkNavy)

---

#### Top Bar

**Container:**
- Background: #2D3142 (DarkNavy)
- Height: 56dp
- Padding horizontal: 16dp
- Shadow: None

**Back Arrow (Left):**
- Icon: Material Symbol `arrow_back` (Rounded, weight 500)
- Size: 24dp
- Color: #FFFFFF
- Touch target: 48dp x 48dp
- Tap: Navigate back to source (Dashboard or Settings)
- Haptic: Light impact

**Title (Center):**
- Text: "My Plans"
- Font: 20sp / Bold (Montserrat Bold)
- Color: #FFFFFF
- Alignment: Center

---

#### Draft Banner (Conditional)

**Visibility**: Only shown when `PlanDraft.status == IN_PROGRESS`

**Container:**
- Background: #3A3F52
- Border: 2dp solid #D4D0E8 (LavenderMedium - Intelligence)
- Border radius: 12dp
- Margin: 16dp horizontal, 16dp top
- Padding: 16dp
- Shadow: Elevation 2dp

**Layout**: Row with icon, text column, and action buttons

**Icon (Left):**
- Icon: Material Symbol `edit_note` (Rounded, weight 400)
- Size: 24dp
- Color: #D4D0E8 (LavenderMedium)
- Margin right: 8dp

**Text Column:**
- **Title**: "Draft: '[Plan Name]'" or "Draft: Untitled Plan"
- Font: 15sp / Medium
- Color: #FFFFFF
- **Subtitle**: "Last edited [relative time]"
- Font: 13sp / Regular
- Color: #B8BCC8

**Action Buttons (Right - Stacked):**

*Resume Button:*
- Text: "Resume"
- Font: 13sp / Bold
- Color: #A8E6CF (LimeGreenDark)
- Background: Transparent
- Touch target: 48dp x 32dp
- Tap: Navigate to Plan Builder (resume draft)
- Haptic: Light impact

*Discard Button:*
- Text: "Discard"
- Font: 13sp / Medium
- Color: #FF9999 (CoralPink)
- Background: Transparent
- Touch target: 48dp x 32dp
- Tap: Show discard confirmation dialog
- Haptic: Light impact

**Entry Animation:**
- Slide in from top (translateY -48dp to 0) + fade in (300ms, easeOutQuart)

---

#### Active Plan Card (Hero)

**Visibility**: Shown when user has an active plan

**Container:**
- Background: #3A3F52
- Border: 2dp solid #A8E6CF (LimeGreenDark)
- Border radius: 16dp
- Margin: 16dp horizontal, 16dp top (or 8dp if draft banner present)
- Padding: 16dp
- Shadow: Elevation 4dp
- **Glow**: 0dp 0dp 24dp #A8E6CF at 35% opacity (subtle pulse animation)

**Glow Animation (Idle):**
- Opacity: 30% → 40% → 30% (3s loop, easeInOutSine)

**Badge Row (Top):**

*Active Badge (Left):*
- Text: "ACTIVE"
- Font: 11sp / Bold (Montserrat Bold)
- Color: #1A1A1A
- Background: #A8E6CF (LimeGreenDark)
- Padding: 4dp 8dp
- Border radius: 4dp
- Letter spacing: 1.2

*Week Badge (Right):*
- Text: "Week [N]"
- Font: 13sp / Medium
- Color: #A8E6CF (LimeGreenDark)
- Background: Transparent

**Divider:**
- Width: 100%
- Height: 1dp
- Color: #4A4F62
- Margin vertical: 16dp

**Plan Info:**

*Plan Name:*
- Font: 20sp / Bold (Montserrat Bold)
- Color: #FFFFFF
- Max lines: 1 (ellipsis if longer)
- Margin bottom: 4dp

*Plan Stats:*
- Text: "[N] days · [N] exercises"
- Font: 14sp / Regular
- Color: #B8BCC8
- Margin bottom: 16dp

**Next Day Row:**

*Next Day Label:*
- Text: "Next: Day [N] - [Day Name]"
- Font: 15sp / Medium
- Color: #FFFFFF
- Flex: 1 (takes remaining space)

*Chevron (Right):*
- Icon: Material Symbol `chevron_right` (Rounded, weight 500)
- Size: 24dp
- Color: #A8E6CF
- Touch target: 48dp x 48dp

**Progress Bar:**

*Container:*
- Height: 8dp
- Background: #4A4F62
- Border radius: 4dp
- Margin top: 16dp

*Fill:*
- Background: Linear gradient #A8E6CF → #CBFFC9 (left to right)
- Width: [completedDays / totalDays] * 100%
- Border radius: 4dp
- Animation: Width transitions smoothly (300ms, easeOutQuart)

*Progress Label (Below):*
- Text: "[completed]/[total]"
- Font: 12sp / Regular
- Color: #B8BCC8
- Alignment: Right
- Margin top: 4dp

**States:**

*Default:*
- As specified above

*Pressed:*
- Background: #4A4F62
- Scale: 0.98
- Glow opacity: 50%
- Transition: 100ms

**Tap Behavior:**
- Tap anywhere: Navigate to Plan Builder Days (5.03) in edit mode
- Haptic: Light impact

---

#### No Active Plan Card

**Visibility**: Shown when user has saved plans but no active plan

**Container:**
- Background: #3A3F52
- Border: 2dp dashed #4A4F62
- Border radius: 16dp
- Margin: 16dp horizontal, 16dp top
- Padding: 24dp
- Alignment: Center

**Icon:**
- Icon: Material Symbol `event_available` (Rounded, weight 400)
- Size: 48dp
- Color: #D4D0E8 (LavenderMedium - Hopeful/Intelligence)
- Margin bottom: 16dp

**Title:**
- Text: "No active plan"
- Font: 16sp / Medium
- Color: #FFFFFF
- Margin bottom: 4dp

**Subtitle:**
- Text: "Tap a saved plan to activate it"
- Font: 14sp / Regular
- Color: #B8BCC8

---

#### Section Divider

**Container:**
- Margin: 24dp horizontal, 24dp vertical
- Height: 1dp
- Background: #3A3F52

---

#### Saved Plans Section Header

**Visibility**: Only shown when inactive plans exist

**Container:**
- Padding: 0dp 16dp
- Margin bottom: 16dp

**Layout**: Row with title and count

**Title (Left):**
- Text: "Saved Plans"
- Font: 14sp / Bold
- Color: #B8BCC8
- Letter spacing: 0.5

**Count Badge (Right):**
- Text: "[N]"
- Font: 14sp / Medium
- Color: #B8BCC8

---

#### Inactive Plan Card

**Container:**
- Background: #3A3F52
- Border: 2dp solid transparent
- Border radius: 12dp
- Margin: 8dp 16dp
- Padding: 16dp
- Shadow: Elevation 2dp

**Layout**: Row with text column and menu button

**Text Column (Left - Flex 1):**

*Plan Name:*
- Font: 16sp / Medium
- Color: #FFFFFF
- Max lines: 1 (ellipsis)
- Margin bottom: 4dp

*Plan Meta:*
- Text: "[N] days · [N] exercises · [last used info]"
- Font: 13sp / Regular
- Color: #B8BCC8

**Last Used Info Variants:**
- Never started: "Never used"
- Used before: "Last used [relative time]" (e.g., "2 weeks ago")

**Menu Button (Right):**
- Icon: Material Symbol `more_vert` (Rounded, weight 500)
- Size: 24dp
- Color: #B8BCC8
- Touch target: 48dp x 48dp
- Tap: Opens context menu

**States:**

*Default:*
- Background: #3A3F52
- Border: Transparent

*Pressed:*
- Background: #4A4F62
- Scale: 0.98

*Swipe Left (Delete):*
- 3-stage swipe (same as 5.03):
  - 0-40dp: Red background peeks, trash icon fades in
  - 40-80dp: Background fully red (#FF9999), "Delete" text appears
  - 80dp+: Card snaps to delete, confirmation haptic

**Tap Behavior:**
- Tap card: Navigate to Plan Preview (5.06) with plan data
- Haptic: Light impact

**Context Menu (on [:] tap):**
- Background: #3A3F52
- Border radius: 8dp
- Shadow: Elevation 8dp
- Options:
  1. "Activate" - Icon: `play_arrow`, Color: #A8E6CF
  2. "Edit" - Icon: `edit`, Color: #FFFFFF
  3. "Duplicate" - Icon: `content_copy`, Color: #FFFFFF
  4. "Delete" - Icon: `delete`, Color: #FF9999

---

#### Create New Plan Button

**Position**: Always at bottom of list (after saved plans or after active card if no saved plans)

**Container:**
- Background: Transparent
- Border: 2dp dashed #4A4F62
- Border radius: 12dp
- Margin: 16dp horizontal, 8dp top, 24dp bottom
- Padding: 16dp
- Height: 56dp
- Alignment: Center

**Layout**: Row with icon and text

**Icon:**
- Icon: Material Symbol `add` (Rounded, weight 500)
- Size: 24dp
- Color: #A8E6CF
- Margin right: 8dp

**Text:**
- Text: "Create New Plan"
- Font: 16sp / Medium
- Color: #A8E6CF

**States:**

*Default:*
- Border: 2dp dashed #4A4F62
- Background: Transparent

*Pressed:*
- Border: 2dp dashed #A8E6CF
- Background: #A8E6CF at 10% opacity
- Scale: 0.98

**Tap Behavior:**
- Tap: Navigate to Plan Builder Setup (5.02)
- Haptic: Light impact

---

#### Empty State (No Plans)

**Visibility**: Shown when user has NO plans (no active, no inactive, no drafts)

**Container:**
- Full screen (below top bar)
- Padding: 48dp horizontal
- Alignment: Center vertically

**Icon:**
- Icon: Material Symbol `calendar_month` (Rounded, weight 400)
- Size: 80dp
- Color: #A8E6CF
- Animation: Idle bounce (translateY 0 → -8dp → 0, 2s loop, easeInOutSine)
- Glow: Radial gradient #A8E6CF → transparent (40dp radius, 25% opacity)
- Margin bottom: 24dp

**Title:**
- Text: "No plans yet"
- Font: 24sp / Bold
- Color: #FFFFFF
- Margin bottom: 8dp

**Subtitle:**
- Text: "Your first structured routine\nis just a tap away."
- Font: 15sp / Regular
- Color: #D4D0E8 (LavenderMedium - Guidance)
- Text align: Center
- Line height: 1.5
- Margin bottom: 32dp

**Primary CTA (Get Recommendations):**
- Background: #A8E6CF
- Border radius: 12dp
- Height: 56dp
- Width: 100%
- Shadow: Elevation 4dp
- Glow: 0dp 0dp 16dp #A8E6CF at 35% opacity
- Margin bottom: 16dp

*Icon:*
- Icon: Material Symbol `auto_awesome` (Rounded, weight 500)
- Size: 20dp
- Color: #1A1A1A
- Margin right: 8dp

*Text:*
- Text: "Get Recommendations"
- Font: 16sp / Bold
- Color: #1A1A1A

*Tap:* Navigate to Onboarding personalization (1.05)

**Secondary CTA (Build from Scratch):**
- Background: Transparent
- Border: 2dp solid #A8E6CF
- Border radius: 12dp
- Height: 56dp
- Width: 100%

*Icon:*
- Icon: Material Symbol `add` (Rounded, weight 500)
- Size: 20dp
- Color: #A8E6CF
- Margin right: 8dp

*Text:*
- Text: "Build from Scratch"
- Font: 16sp / Bold
- Color: #A8E6CF

*Tap:* Navigate to Plan Builder Setup (5.02)

---

#### Entry Animations (Staggered)

**Timeline - With Active Plan:**

| Delay | Element | Animation |
|-------|---------|-----------|
| 0ms | Screen | Fade in (opacity 0 → 1, 200ms) |
| 100ms | Draft Banner (if present) | TranslateY -48dp → 0 + fade in (300ms, easeOutQuart) |
| 150ms | Active Plan Card | Scale 0.95 → 1.0 + fade in (400ms, spring damping 0.6) |
| 350ms | Section Divider | Fade in (200ms) |
| 400ms | Section Header | TranslateY +16dp → 0 + fade in (250ms) |
| 500ms | Inactive Card 1 | TranslateY +24dp → 0 + fade in (300ms, easeOutQuart) |
| 600ms | Inactive Card 2 | TranslateY +24dp → 0 + fade in (300ms, easeOutQuart) |
| ... | Additional cards | +100ms each |
| Last | Create Button | TranslateY +24dp → 0 + fade in (300ms, easeOutQuart) |

**Timeline - Empty State:**

| Delay | Element | Animation |
|-------|---------|-----------|
| 0ms | Screen | Fade in (200ms) |
| 150ms | Icon | Scale 0.5 → 1.1 → 1.0 (500ms, spring damping 0.5) + start bounce loop |
| 400ms | Title | TranslateY +20dp → 0 + fade in (350ms) |
| 550ms | Subtitle | TranslateY +20dp → 0 + fade in (350ms) |
| 750ms | Primary CTA | TranslateY +16dp → 0 + fade in (300ms) + glow pulse start |
| 900ms | Secondary CTA | TranslateY +16dp → 0 + fade in (300ms) |

---

#### Loading State (Skeleton)

**Visibility**: Shown while fetching plans from local storage/network

**Duration**: Typically < 200ms (local), up to 2s (network sync)

**Active Plan Card Skeleton:**
- Background: #3A3F52
- Border: 2dp solid #4A4F62 (no glow)
- Border radius: 16dp
- Margin: 16dp horizontal, 16dp top
- Padding: 16dp

*Skeleton Elements:*
- Badge placeholder: 48dp x 16dp, #4A4F62, border radius 4dp
- Title placeholder: 160dp x 24dp, #4A4F62, border radius 4dp, margin top 16dp
- Subtitle placeholder: 120dp x 16dp, #4A4F62, border radius 4dp, margin top 8dp
- Progress bar placeholder: 100% x 8dp, #4A4F62, border radius 4dp, margin top 16dp

*Shimmer Animation:*
- Linear gradient: transparent → #5A5F72 at 50% → transparent
- Animation: translateX -100% → +100% (1.5s loop, easeInOut)

**Inactive Card Skeleton:**
- Same structure, smaller (no progress bar)
- 2-3 skeleton cards shown

---

#### Error State (Failed to Load)

**Visibility**: Shown when plan fetch fails

**Container:**
- Full screen (below top bar)
- Padding: 48dp horizontal
- Alignment: Center vertically

**Icon:**
- Icon: Material Symbol `cloud_off` (Rounded, weight 400)
- Size: 64dp
- Color: #B8BCC8
- Margin bottom: 16dp

**Title:**
- Text: "Couldn't load plans"
- Font: 20sp / Bold
- Color: #FFFFFF
- Margin bottom: 8dp

**Subtitle:**
- Text: "Check your connection and try again."
- Font: 15sp / Regular
- Color: #B8BCC8
- Margin bottom: 24dp

**Retry Button:**
- Background: #A8E6CF
- Border radius: 12dp
- Height: 48dp
- Padding: 0dp 32dp

*Text:*
- Text: "Try Again"
- Font: 16sp / Bold
- Color: #1A1A1A

*Tap:* Retry loading plans
*Haptic:* Light impact

---

#### Discard Draft Confirmation Dialog

**Trigger**: User taps "Discard" on draft banner

**Overlay:**
- Background: #000000 at 60% opacity
- Tap outside: Dismiss dialog

**Dialog Container:**
- Background: #3A3F52
- Border radius: 16dp
- Margin: 32dp horizontal
- Padding: 24dp
- Shadow: Elevation 16dp
- Max width: 320dp
- Alignment: Center

**Title:**
- Text: "Discard draft?"
- Font: 18sp / Bold
- Color: #FFFFFF
- Margin bottom: 8dp

**Message:**
- Text: "This draft will be permanently deleted."
- Font: 15sp / Regular
- Color: #B8BCC8
- Margin bottom: 24dp

**Buttons (Row):**

*Cancel Button:*
- Text: "Keep"
- Font: 15sp / Medium
- Color: #B8BCC8
- Background: Transparent
- Padding: 12dp 24dp
- Tap: Dismiss dialog

*Discard Button:*
- Text: "Discard"
- Font: 15sp / Bold
- Color: #1A1A1A
- Background: #FF9999 (CoralPink)
- Border radius: 8dp
- Padding: 12dp 24dp
- Tap: Delete draft, dismiss dialog, show toast
- Haptic: Medium impact

---

#### Activate Plan Confirmation Dialog

**Trigger**: User taps "Activate" on inactive plan (from context menu or preview screen)

**Dialog Container:** Same as Discard Dialog

**Title:**
- Text: "Activate '[Plan Name]'?"
- Font: 18sp / Bold
- Color: #FFFFFF

**Message:**
- If active plan exists: "Your current plan '[Current Plan]' will be paused.\nYou can switch back anytime."
- If no active plan: "This will become your active workout plan."
- Font: 15sp / Regular
- Color: #B8BCC8

**Progress Info (if switching plans):**
- Text: "'[New Plan]' will start from Day 1."
- Font: 14sp / Regular
- Color: #D4D0E8 (LavenderMedium)
- Margin top: 8dp

**Buttons:**

*Cancel:*
- Text: "Cancel"
- Color: #B8BCC8

*Activate:*
- Text: "Activate"
- Color: #1A1A1A
- Background: #A8E6CF
- Tap: Activate plan, update UI, show success toast
- Haptic: Medium impact

---

---

#### Out-of-Order Day Warning Dialog (NEW)

**Trigger**: User taps "Start This Day" on a day that is NOT their current progression day.

**Example Scenario**: User is on Day 2 (Pull), but wants to start Day 3 (Legs) because pull equipment is occupied.

**Overlay:**
- Background: #000000 at 60% opacity
- Tap outside: Dismiss dialog

**Dialog Container:**
- Background: #3A3F52
- Border radius: 16dp
- Margin: 32dp horizontal
- Padding: 24dp
- Shadow: Elevation 16dp
- Max width: 320dp
- Alignment: Center

**Icon:**
- Icon: Material Symbol `swap_horiz` (Rounded, weight 400)
- Size: 40dp
- Color: #FFB366 (warning orange)
- Margin bottom: 16dp
- Position: Center

**Title:**
- Text: "Starting Out of Order"
- Font: 18sp / Bold
- Color: #FFFFFF
- Margin bottom: 8dp

**Context Block:**
- Background: #2D3142
- Border radius: 8dp
- Padding: 12dp
- Margin bottom: 16dp

*Current Progression:*
- Text: "Your progression: Day [X] - [Day Name]"
- Example: "Your progression: Day 2 - Pull"
- Font: 14sp / Regular
- Color: #B8BCC8

*Selected Day:*
- Text: "You're starting: Day [Y] - [Day Name]"
- Example: "You're starting: Day 3 - Legs"
- Font: 14sp / Medium
- Color: #FFFFFF
- Margin top: 4dp

**Warning Message:**
- Text: "Starting out of order may affect your training balance."
- Font: 14sp / Regular
- Color: #B8BCC8
- Margin bottom: 24dp

**Buttons (Row):**

*Cancel Button (Left):*
- Text: "Cancel"
- Font: 15sp / Medium
- Color: #B8BCC8
- Background: Transparent
- Padding: 12dp 24dp
- Tap: Dismiss dialog, return to Plan Preview
- Haptic: Light impact

*Start Anyway Button (Right):*
- Text: "Start Anyway"
- Font: 15sp / Bold
- Color: #1A1A1A
- Background: #A8E6CF (LimeGreenDark)
- Border radius: 8dp
- Padding: 12dp 24dp
- Tap: Navigate to Workout Preview (5.05) with selected day
- Haptic: Medium impact

**Post-Completion Behavior:**
- After workout completes, show "Skipped Day Handler" dialog (see 2.04-workout-summary.md)
- User chooses: Mark skipped day as "Skipped" or keep it "Pending"

---

#### Success Toast (Plan Activated)

**Trigger**: After successful plan activation

**Container:**
- Background: #A8E6CF
- Border radius: 8dp
- Padding: 12dp 16dp
- Margin: 16dp horizontal
- Position: Bottom of screen (above safe area)
- Shadow: Elevation 4dp

**Text:**
- Text: "'[Plan Name]' is now active"
- Font: 14sp / Medium
- Color: #1A1A1A

**Duration**: 3 seconds, then slide out

**Animation:**
- Entry: TranslateY +56dp → 0 (300ms, spring damping 0.7)
- Exit: TranslateY 0 → +56dp (200ms, easeIn)

---

### </plan_library_screen_dark>

---

### <light_mode_colors>

**Color Palette Changes (vs Dark Mode):**

| Element | Dark Mode | Light Mode |
|---------|-----------|------------|
| **Screen Background** | #2D3142 | #F3F3F8 |
| **Top Bar Background** | #2D3142 | #FFFFFF |
| **Card Background** | #3A3F52 | #FFFFFF |
| **Card Border (Default)** | transparent | #E5E5E5 |
| **Active Card Border** | #A8E6CF | #A8E6CF |
| **Text Primary** | #FFFFFF | #1A1A1A |
| **Text Secondary** | #B8BCC8 | #666666 |
| **Divider** | #3A3F52 | #E5E5E5 |
| **Progress Bar Track** | #4A4F62 | #E5E5E5 |
| **Dialog Background** | #3A3F52 | #FFFFFF |

**Visual Adjustments:**
- Card shadows: Reduce opacity by 50%
- Glows: Reduce opacity by 40%
- All other specs: Identical to dark mode

### </light_mode_colors>

---

## 4. Notes

### Design Philosophy

**"Command Center" for Plans:**
- Clear hierarchy: Active plan is hero, saved plans are secondary
- One glance shows status: What am I following? Where am I?
- Easy actions: Create, switch, edit - all accessible

**Zero Friction:**
- No unnecessary tabs or filters (for MVP)
- Active plan at top - no scrolling to find current plan
- Swipe to delete for quick cleanup

**Encouraging Empty State:**
- Two clear paths: AI (recommended) or manual
- Bouncing icon adds life and draws attention
- Copy emphasizes ease: "just a tap away"

### Brand DNA Compliance

- **"Digital Coach"**: Progress bar shows journey, "Next: Day X" guides action
- **"Soft Tech / Calm Focus"**: Subtle glow, gentle animations, no aggressive elements
- **"Zero Friction"**: One tap to continue workout, one tap to switch plans
- **"Optimistic UI"**: Instant state changes, no loading states for local operations

### Spacing System (8dp Grid)

**Valid Values**: 8, 16, 24, 32, 40, 48, 56, 64dp
**Used in this spec**:
- Top bar height: 56dp
- Card margins: 16dp horizontal
- Card padding: 16dp / 24dp
- Section gaps: 24dp
- Progress bar height: 8dp
- Icon sizes: 24dp, 48dp, 80dp

### User Flows

**Flow 1: View and Continue Active Plan**
```
Dashboard
  ↓ Tap "Manage Plan"
Plan Library (5.01)
  ↓ See active plan progress
  ↓ Tap active card
Plan Builder Days (5.03, edit mode)
  ↓ View/edit current plan
```

**Flow 2: Switch to Different Plan**
```
Plan Library (5.01)
  ↓ Scroll to saved plans
  ↓ Tap inactive plan card
Plan Preview (5.06)
  ↓ Review plan details
  ↓ Tap "Start This Plan"
Confirmation Dialog
  ↓ Tap "Activate"
Plan Library (5.01)
  ↓ New plan now active
  ↓ Toast: "[Plan] is now active"
```

**Flow 3: Create New Plan**
```
Plan Library (5.01)
  ↓ Tap "Create New Plan"
Plan Builder Setup (5.02)
  ↓ Enter name, description
  ↓ Tap "Continue"
Plan Builder Days (5.03)
  ↓ Add days and exercises
  ↓ Tap "Save Plan"
Plan Library (5.01)
  ↓ New plan appears in saved list
```

**Flow 4: Resume Draft**
```
Plan Library (5.01)
  ↓ See draft banner at top
  ↓ Tap "Resume"
Plan Builder (wherever user left off)
  ↓ Continue creating plan
```

**Flow 5: Delete Inactive Plan**
```
Plan Library (5.01)
  ↓ Swipe left on inactive plan card
  ↓ Swipe past 80dp threshold
Card deleted
  ↓ Haptic confirmation
```

### Accessibility Features

**WCAG AA Compliance:**
- All text contrast ≥ 4.5:1
- Touch targets ≥ 48dp
- Focus indicators visible
- Screen reader support for all elements

**Screen Reader Announcements:**
- Active card: "Active plan, [Name], Week [N], Day [X] of [Y], [progress]% complete"
- Inactive card: "[Name], [N] days, [N] exercises, [last used], double tap to preview"
- Draft banner: "Draft plan, [Name], last edited [time], double tap to resume"
- Empty state: "No plans yet, two buttons available: Get Recommendations, Build from Scratch"

**Reduce Motion Support:**
- All elements appear immediately (no stagger)
- Active Card glow pulse disabled (static glow at 35%)
- Empty state icon bounce disabled (static icon)
- Swipe delete still functional (no animation)
- All scale animations disabled

### Developer Integration Notes

**State Management:**

*Plan Library State:*
- Active Plan: Currently active workout plan (or null if none)
- Inactive Plans: List of saved but inactive plans
- Drafts: List of unfinished plan drafts
- Is Loading: Loading state flag

*Plan Library Actions:*
- Load Plans: Fetch all plans from storage
- Activate Plan: Set a plan as the active workout plan
- Delete Plan: Remove a saved plan
- Delete Draft: Remove an unfinished draft

**Navigation Data:**

*To Plan Preview:*
- Pass: Plan ID and mode ("preview" or "activate")

*To Plan Builder Setup (new plan):*
- Pass: Mode = "create"

*To Plan Builder Days (edit active):*
- Pass: Plan ID and mode = "edit"

*To Plan Builder (resume draft):*
- Pass: Draft ID and mode = "resume"

**Haptic Feedback Map:**
- Back button: Light impact
- Card tap: Light impact
- Activate button: Medium impact
- Delete swipe: Medium impact (at commit threshold)
- Toast appear: None

### Edge Cases Handled

1. **No plans, no drafts**: Show empty state with two CTAs
2. **Draft but no plans**: Show draft banner + empty state CTAs below
3. **Active plan only**: Show active card + create button (no "Saved Plans" section)
4. **No active, but saved plans exist**: Show "No active plan" card + saved plans list
5. **Many saved plans**: List scrolls, active card stays at top
6. **Plan name very long**: Truncate with ellipsis (max 1 line)
7. **Delete active plan**: Not allowed via swipe (context menu shows "Deactivate" first)
8. **Network error on activate**: Show error toast, retry option
9. **Multiple drafts**: Show most recent draft in banner, others accessible in context

### Future Enhancements (Post-MVP)

- [ ] Tabs for filtering: "All", "Created", "Recommended"
- [ ] Search/filter by name
- [ ] Plan folder/categories
- [ ] Drag to reorder saved plans
- [ ] Plan statistics (total workouts completed, adherence %)
- [ ] Plan sharing (export/import)
- [ ] Archive section (completed/abandoned plans)

---

### Revision History

- **2025-11-26 (v1.3):** Out-of-Order Day Support
  - ADDED: Out-of-Order Day Warning Dialog - shown when user starts a day different from current progression
  - Links to Skipped Day Handler dialog in Workout Summary (2.04)
  - Supports flexible training while keeping user informed of progression impact

- **2025-01-XX (v1.2):** Removed "AI" terminology
  - Changed "Get AI Recommendations" → "Get Recommendations"
  - Changed filter tab "AI/Downloaded" → "Recommended"
  - Warmer, less technical language per brand voice

- **2025-01-XX (v1.1):** Styler review fixes applied
  - Fixed 5 spacing grid violations (12dp → 8dp/16dp)
  - Fixed 2 color system violations (#666666 → #B8BCC8/#D4D0E8)
  - Fixed glow opacity consistency (30% → 35%)
  - Added Active Plan Card pressed state
  - Added Loading skeleton state with shimmer
  - Added Error state with retry
  - Enhanced Reduce Motion Support for glow pulse
  - All specs now 8dp grid compliant

- **2025-01-XX (v1.0):** Initial specification
  - Active plan hero card with glow border
  - Saved plans list with swipe-to-delete
  - Empty state with dual CTAs
  - Draft resume banner
  - Activation confirmation flow
  - Staggered entry animations
  - Dark mode first design
  - Full accessibility support

---

**End of Specification**

**Status:** **COMPLETE - Ready for Development**
