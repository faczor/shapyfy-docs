---
tags:
  - mobile
  - auth
screen: Auth Flow
agent: "[[designer]]"
feature: "[[features/4-authentication]]"
design_state: "[[Statuses/Finished]]"
---
# 4.02 - Authentication Flow

> **Parent Feature**: [4-authentication.md](../features/4-authentication.md)
> **Navigation**: See [00-app-overview.md](../features/00-app-overview.md) for complete flows

## 1. Visual Preview
> [!TIP]
> *[Insert Screen Mockup Here]*
> *For now, we can use a placeholder or a Mermaid diagram if applicable.*

## 2. Human-Readable Summary
**User Behavior**
When a user decides to create an account (from any touchpoint), they enter this flow.
1.  **Method Selection**: They choose Google, Apple, or Email.
2.  **Email Form (if chosen)**: Standard email/password entry.
3.  **Success**: A celebration screen that handles data syncing in the background before returning them to the app.

**Key Cases**
*   **OAuth**: One-tap sign-in (Google/Apple).
*   **Email**: Manual entry with validation.
*   **Syncing**: The success screen acts as a loading state for the initial data sync.

**Data Displayed**
*   **Sync Status**: "Syncing your 3 workouts..." -> "Backed up âœ“".

**Interaction & Motion**
The flow guides the user through each step with clear, sliding transitions. As they complete their profile, the progress bar advances fluidly, giving a sense of forward momentum.


## 3. Detailed Designer Specification
### <auth_flow_screens>

#### Screen 1: Sign-In Method Selection
**Type:** Full-screen modal.

**Header:**
- **Close Button**: Top right (âœ•).
- **Headline**: "Join Shapyfy Early Access".
- **Subtext**: "Backup your workouts and get early access to new features".

**Buttons:**
1.  **Google**: White button, Google logo.
2.  **Apple**: Black button, Apple logo.
3.  **Divider**: "or"
4.  **Email**: Transparent button, LimeGreen border, Envelope icon.

**Footer:**
- Terms & Privacy links.

#### Screen 2: Email/Password Form
**Triggered by:** "Continue with Email".

**Navigation:**
- **Back Button**: Top left (â†).

**Form Fields:**
1.  **Email**: Validated on blur.
2.  **Password**: Min 8 chars, Show/Hide toggle.

**Action:**
- **"Create Account"**: LimeGreenDark button.
- **Loading State**: Spinner + "Creating...".

**Links:**
- "Already have an account? [Sign in]"

#### Screen 3: Account Creation Success
**Triggered by:** Successful sign-up (any method).

**Visuals:**
- **Background**: Radial Gradient (LimeGreen).
- **Icon**: Animated Checkmark (Scale up).
- **Headline**: "Welcome to Early Access! ðŸŽ‰".
- **Subtext**: User email.

**Sync Progress Card:**
- **Status**: Spinner -> Checkmark.
- **Text**: "Syncing your [N] workouts..." -> "[N] workouts backed up âœ“".
- **Progress Bar**: Indeterminate -> Full.

**What's Next:**
- List of expectations (Email welcome, New features, Support).

**Action:**
- **"Continue to Dashboard"**: Enabled after sync completes.

### </auth_flow_screens>

## 4. Notes
*   **Developer Notes**:
    *   **KMP Implementation**: OAuth requires platform-specific libraries (Google Sign-In, AuthenticationServices).
    *   **Sync Logic**: The Success screen must wait for the initial sync of local data to the cloud before enabling the "Continue" button.
    *   **Error Handling**: If sync fails, show a "Retry" button on the success screen, or "Continue Anyway" (saving locally).
*   **Revision History**:
    *   **v1.0**: Initial flow definition.
